import{d as H,dS as W,c as k,i as A,o as L,b as O,F as Q,h as Z,n as g,dx as a,dG as F,e as R,f as j,dy as ee,r as D,dD as te,eF as v,dT as ne,dC as ae,eo as le,dU as U,w as $,g as oe,eG as se,dL as re}from"./index-13dc4d80.js";import{_ as G}from"./index-ef0e9ecd.js";const ie=["onClick"],ue=["onClick"],de=H({inheritAttrs:!1,__name:"slider-marks",props:{modelValue:{default:()=>[]},percentStart:{default:0},percentEnd:{default:0},rangeMin:{default:0},rangeMax:{default:100}},emits:["position"],setup(l,{emit:T}){const d=W("slider"),e=l,c=T,y=k(()=>{const B=e.rangeMax-e.rangeMin;return e.modelValue.map(i=>{const o=i.key-e.rangeMin,m=Math.round(o/B*100)||0,s=m/100;return{...i,percent:m,isOver:s===e.percentStart||s===e.percentEnd,isOvered:s>e.percentStart&&s<e.percentEnd,markInfo:i.labelNode||A("span",{style:i.style},i.label)}})});return(B,i)=>(L(),O("div",{class:g(a(d)("marks"))},[(L(!0),O(Q,null,Z(y.value,o=>(L(),O("div",{key:o.key,class:g(a(d)("mark-item",{over:o.isOver,overed:o.isOvered})),style:F({left:o.percent+"%"})},[R("div",{class:g(a(d)("mark-item-pointer")),onClick:m=>c("position",o.percent)},null,10,ie),R("div",{class:g(a(d)("mark-item-box")),onClick:m=>c("position",o.percent)},[(L(),j(ee(o.markInfo)))],10,ue)],6))),128))],2))}}),P=l=>l<=0?0:l>=100?100:l,ce=(l,T,d,e,c,y,B)=>{let i=0,o=null,m=0;const s=D(!0),V=D(!1),u=r=>{te(()=>{let n=Math.round(e.value/d.value*100),t=Math.round(c.value/d.value*100);n=P(n),t=P(t);const M=l.max-l.min,E=M*n/100+l.min,Y=M*t/100+l.min,X=y.value?[E,Y]:Y;B(r,X)})},_=r=>{let n=e.value,t=c.value;if(y.value){if(s.value?(t=r>=i?i:r,t=t<=0?0:t):(n=r>=i?i:r,n=n<=0?0:n),n>=t){const M=n;n=t,t=M,s.value=!s.value}}else t=r>=i?i:r,t=t<=0?0:t;e.value=n,c.value=t,u("update:modelValue")},h=r=>{const n=o;if(l.direction===v[1])if(r.clientX>=n.left&&r.clientX<=n.right){const t=r.clientX-n.left,M=Math.round(t/m)*m;_(M)}else{const t=r.clientX<n.left?-9999:9999;_(t)}else if(l.direction===v[0])if(r.clientY>=n.top&&r.clientY<=n.bottom){const t=n.bottom-r.clientY,M=Math.round(t/m)*m;_(M)}else{const t=r.clientY<n.top?9999:-9999;_(t)}},w=()=>{V.value=!0,i=d.value,window.addEventListener("mousemove",h),window.addEventListener("mouseup",N),o=T.value.getBoundingClientRect(),(l.direction===v[1]||l.direction===v[0])&&(m=i*l.step/100)},S=()=>{l.disabled||(w(),s.value=!1)},x=()=>{l.disabled||(w(),s.value=!0)},N=()=>{V.value=!1,window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",N),u("change")};return{isEndBtn:s,moving:V,handleStartMouseDown:S,handleEndMouseDown:x,emitValue:u}},ve=H({name:"YkSlider",__name:"slider",props:{modelValue:{default:0},disabled:{type:Boolean,default:!1},min:{default:0},max:{default:100},direction:{default:v[1]},step:{default:1},marks:{default:()=>[]},height:{default:200},showInput:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(l,{emit:T}){const d=W("slider"),e=l,{modelValue:c,marks:y,min:B,max:i}=ne(e),o=D(),m=T,s=k(()=>Array.isArray(c.value)),V=k(()=>e.max-e.min),u=D(0),_=()=>{e.direction===v[1]?u.value=o.value?o.value.offsetWidth:0:e.direction===v[0]&&(u.value=o.value?o.value.offsetHeight:0)};ae(()=>{_(),window.addEventListener("resize",_)}),le(()=>{window.removeEventListener("resize",_)});const h=D(0),w=D(0),S=k(()=>{if(s.value){const p=(c.value[0]||0)-e.min;return Math.round(p/V.value*100)/100}else return 0}),x=k(()=>{if(s.value){const p=(c.value[1]||0)-e.min;return Math.round(p/V.value*100)/100}else{const f=c.value;return Math.round(f/V.value*100)/100}}),N=k(()=>s.value?(c.value[0]||0).toString():"0"),r=k(()=>s.value?(c.value[1]||0).toString():c.value.toString()),n=k(()=>e.direction===v[1]?"top":"right"),t=k(()=>e.direction===v[1]?{height:"2px"}:e.direction===v[0]?{height:e.height+"px",width:"2px"}:{}),M=k(()=>e.direction===v[1]?{top:0,height:"2px",left:h.value+"px",width:w.value-h.value+"px"}:e.direction===v[0]?{left:0,width:"2px",bottom:h.value+"px",height:w.value-h.value+"px"}:{}),{moving:E,isEndBtn:Y,handleStartMouseDown:X,handleEndMouseDown:q,emitValue:J}=ce(e,o,u,h,w,s,m);U(S,()=>{E.value||(h.value=S.value*u.value)},{immediate:!0}),U(x,()=>{E.value||(w.value=x.value*u.value)},{immediate:!0}),U(u,()=>{h.value=S.value*u.value,w.value=x.value*u.value},{immediate:!0});const z=f=>{if(e.disabled)return;let p=f/100;if(s.value){const C=Math.abs(S.value-p),I=Math.abs(x.value-p);C>=I?w.value=p*u.value:h.value=p*u.value}else w.value=p*u.value;J("update:modelValue")},K=f=>{if(e.disabled)return;const C=o.value.getBoundingClientRect();if(e.direction===v[1]){const I=f.clientX-C.left;let b=Math.round(I/u.value*100);b=Math.round(b/e.step)*e.step,z(b)}else if(e.direction===v[0]){const I=u.value-(f.clientY-C.top);let b=Math.round(I/u.value*100);b=Math.round(b/e.step)*e.step,z(b)}};return(f,p)=>(L(),O("div",{class:g(a(d)({withMarks:!!a(y).length,disabled:f.disabled},[f.direction]))},[R("div",{ref_key:"runwayRef",ref:o,class:g(a(d)("runway")),style:F(t.value),onClick:K},[R("div",{class:g(a(d)("bar")),style:F(M.value)},[s.value?(L(),j(a(G),{key:0,class:g(a(d)("button",{start:!0})),placement:n.value,open:a(E)&&!a(Y),trigger:"hover",title:N.value,onMousedown:a(X)},{default:$(()=>[R("div",{class:g(a(d)("tooltipSpan"))},null,2)]),_:1},8,["class","placement","open","title","onMousedown"])):oe("",!0),A(a(G),{class:g(a(d)("button",{end:!0})),placement:n.value,open:a(E)&&a(Y),trigger:"hover",title:r.value,onMousedown:a(q)},{default:$(()=>[R("div",{class:g(a(d)("tooltipSpan"))},null,2)]),_:1},8,["class","placement","open","title","onMousedown"])],6)],6),A(de,{modelValue:a(y),"onUpdate:modelValue":p[0]||(p[0]=C=>se(y)?y.value=C:null),"range-min":a(B),"range-max":a(i),"percent-start":S.value,"percent-end":x.value,onPosition:z},null,8,["modelValue","range-min","range-max","percent-start","percent-end"])],2))}}),me=re(ve),he=me;export{me as Y,he as _};
