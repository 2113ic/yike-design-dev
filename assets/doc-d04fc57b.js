import{d as k,a2 as X,r as h,ag as Z,ah as G,ai as J,a4 as C,aj as K,T as I,c as R,U as O,o as r,b,e as t,X as Q,n as $,Z as T,y as P,z as tt,k as v,f as y,w as o,i as n,j as l,m as A,ak as S,al as et,a as E}from"./index-9ece1d16.js";function L(s){return s===window}function z(s){return L(s)?{top:0,bottom:window.innerHeight}:s.getBoundingClientRect()}const ot=k({name:"YkAffix",__name:"affix",props:{position:{default:"top"},target:{},offset:{default:0},zIndex:{default:100}},emits:["change"],setup(s,{expose:c,emit:a}){const e=s,i=X("affix"),f=h(),u=h(),_=h({top:0,bottom:0}),d=h(!1),{height:g}=Z(),{top:M,bottom:H,update:w,height:U,width:Y}=G(f,{windowScroll:!1});J(B),C(()=>g.value,()=>{L(u.value)&&(_.value.bottom=g.value),B()}),C(()=>d.value,()=>a("change",d.value)),C(()=>e.target,()=>F()),K(u,"scroll",D),c({updatePosition:D}),I(()=>{F()});const N=R(()=>{if(!d.value)return{};const p=e.position==="bottom",m=e.position==="top";return{bottom:p?`${g.value-_.value.bottom+e.offset}px`:"",top:m?`${_.value.top+e.offset}px`:"",zIndex:e.zIndex}}),V=R(()=>({height:d.value?`${U.value}px`:"",width:d.value?`${Y.value}px`:""}));function D(){_.value=z(u.value),w()}async function F(){e.target?typeof e.target=="string"?u.value=document.querySelector(e.target)??window:u.value=e.target:u.value=window||document.documentElement,await O(),_.value=z(u.value),w()}function B(){const{position:p,offset:m}=e,W=p==="bottom",{top:j,bottom:q}=_.value;d.value=W?q-m<=H.value:M.value-j<=m}return(p,m)=>(r(),b("div",{ref_key:"rootRef",ref:f,class:$([T(i)()]),style:P(V.value)},[t("div",{class:$([T(i)("postion",{active:d.value})]),style:P(N.value)},[Q(p.$slots,"default")],6)],6))}}),nt=tt(ot),x=nt,lt={};function at(s,c){const a=A,e=x;return r(),y(e,null,{default:o(()=>[n(a,null,{default:o(()=>[l("Affix Top")]),_:1})]),_:1})}const st=v(lt,[["render",at]]),it={},ct={style:{height:"600px"}};function ut(s,c){const a=A,e=x;return r(),b("div",ct,[n(e,{offset:80},{default:o(()=>[n(a,null,{default:o(()=>[l("offset top 80px")]),_:1})]),_:1})])}const ft=v(it,[["render",ut]]),dt={};function rt(s,c){const a=A,e=x;return r(),y(e,{offset:120,position:"bottom"},{default:o(()=>[n(a,null,{default:o(()=>[l("offset bottom 120px")]),_:1})]),_:1})}const _t=v(dt,[["render",rt]]),pt=k({__name:"affix-change",setup(s){const c=a=>{console.log(a)};return(a,e)=>{const i=A,f=x;return r(),y(f,{offset:80,position:"bottom",onChange:c},{default:o(()=>[n(i,null,{default:o(()=>[l("offset bottom 80px")]),_:1})]),_:1})}}}),mt={class:"yk-scroll-wrapper"},At=k({__name:"affix-container",setup(s){const c=S(),a=S();return I(()=>{var e;window.addEventListener("scroll",(e=a.value)==null?void 0:e.updatePosition,!0)}),et(()=>{var e;window.removeEventListener("scroll",(e=a.value)==null?void 0:e.updatePosition,!0)}),(e,i)=>{const f=A,u=x;return r(),b("div",{ref_key:"targetRef",ref:c,class:"yk-wrapper"},[t("div",mt,[n(u,{ref_key:"affixRef",ref:a,offset:30,target:c.value,style:{"margin-top":"60px"}},{default:o(()=>[n(f,null,{default:o(()=>[l("Affix Top in container")]),_:1})]),_:1},8,["target"])])],512)}}});const xt=v(At,[["__scopeId","data-v-afc35d13"]]),ht=t("p",null,"基本用法，不设置固定位置时，当页面滚动元素不可见时，元素固定在页面最顶部。",-1),vt=t("p",null,"当页面滚动或浏览器尺寸改变时，元素向上滚动到距顶部一定距离时固定。",-1),yt=t("p",null,[l("通过设置"),t("code",null,"position"),l("属性为"),t("code",null,"bottom"),l("时，当页面滚动或浏览器尺寸改变时，元素向下滚动到距底部一定距离时固定。")],-1),gt=t("p",null,[l("当元素"),t("code",null,"fixed"),l("状态改变回调时，触发"),t("code",null,"change"),l("事件")],-1),Ct=t("p",null,[l("传入"),t("code",null,"target"),l("作为滚动容器。注意：当容器外部还有滚动元素时，可以主动监听外部滚动事件，调用"),t("code",null,"updatePosition"),l("方法去更新固钉位置。")],-1),Et=t("p",null,[t("code",null,"<affix>"),l(" Props")],-1),kt=t("div",{class:"table-container"},[t("table",null,[t("thead",null,[t("tr",null,[t("th",null,"参数名"),t("th",null,"描述"),t("th",null,"类型"),t("th",null,"默认值")])]),t("tbody",null,[t("tr",null,[t("td",null,"offset"),t("td",null,"偏移量"),t("td",null,"number"),t("td",null,"0")]),t("tr",null,[t("td",null,"position"),t("td",null,"偏移方向"),t("td",null,"'top'｜'bottom'"),t("td",null,"'top'")]),t("tr",null,[t("td",null,"target"),t("td",null,"滚动容器，默认是 window"),t("td",null,"string ｜ window ｜ HTMLElement"),t("td",null,"window")])])])],-1),bt=t("p",null,[t("code",null,"<affix>"),l("Events")],-1),wt=t("div",{class:"table-container"},[t("table",null,[t("thead",null,[t("tr",null,[t("th",null,"事件名"),t("th",null,"描述"),t("th",null,"参数")])]),t("tbody",null,[t("tr",null,[t("td",null,"change"),t("td",null,"元素固定状态改变时触发事件"),t("td",null,"fixed:boolean")])])])],-1),Dt=t("p",null,[t("code",null,"<affix>"),l("Methods")],-1),Ft=t("div",{class:"table-container"},[t("table",null,[t("thead",null,[t("tr",null,[t("th",null,"方法名"),t("th",null,"描述"),t("th",null,"参数"),t("th",null,"返回值")])]),t("tbody",null,[t("tr",null,[t("td",null,"updatePosition"),t("td",null,"用于主动更新位置"),t("td",null,"-"),t("td",null,"-")])])])],-1),Rt={__name:"doc",setup(s){return(c,a)=>{const e=E("yk-title"),i=E("yk-snippet"),f=E("DocPage");return r(),y(f,null,{default:o(()=>[n(e,{level:2,id:"YkAffix-固钉"},{default:o(()=>[l("YkAffix 固钉")]),_:1}),n(i,{title:"基本用法",code:"%3Ctemplate%3E%0A%20%20%3Cyk-affix%3E%0A%20%20%20%20%3Cyk-button%3EAffix%20Top%3C%2Fyk-button%3E%0A%20%20%3C%2Fyk-affix%3E%0A%3C%2Ftemplate%3E%0A"},{demo:o(()=>[n(st)]),desc:o(()=>[ht]),_:1}),n(i,{title:"顶部固定",code:"%3Ctemplate%3E%0A%20%20%3Cdiv%20style%3D%22height%3A%20600px%22%3E%0A%20%20%20%20%3Cyk-affix%20%3Aoffset%3D%2280%22%3E%0A%20%20%20%20%20%20%3Cyk-button%3Eoffset%20top%2080px%3C%2Fyk-button%3E%0A%20%20%20%20%3C%2Fyk-affix%3E%0A%20%20%3C%2Fdiv%3E%0A%3C%2Ftemplate%3E%0A"},{demo:o(()=>[n(ft)]),desc:o(()=>[vt]),_:1}),n(i,{title:"底部固定",code:"%3Ctemplate%3E%0A%20%20%3Cyk-affix%20%3Aoffset%3D%22120%22%20position%3D%22bottom%22%3E%0A%20%20%20%20%3Cyk-button%3Eoffset%20bottom%20120px%3C%2Fyk-button%3E%0A%20%20%3C%2Fyk-affix%3E%0A%3C%2Ftemplate%3E%0A"},{demo:o(()=>[n(_t)]),desc:o(()=>[yt]),_:1}),n(i,{title:"固定状态改变回调",code:"%3Ctemplate%3E%0A%20%20%3Cyk-affix%20%3Aoffset%3D%2280%22%20position%3D%22bottom%22%20%40change%3D%22change%22%3E%0A%20%20%20%20%3Cyk-button%3Eoffset%20bottom%2080px%3C%2Fyk-button%3E%0A%20%20%3C%2Fyk-affix%3E%0A%3C%2Ftemplate%3E%0A%3Cscript%20lang%3D%22ts%22%20setup%3E%0Aconst%20change%20%3D%20(v%3A%20any)%20%3D%3E%20%7B%0A%20%20console.log(v)%0A%7D%0A%3C%2Fscript%3E%0A"},{demo:o(()=>[n(pt)]),desc:o(()=>[gt]),_:1}),n(i,{title:"指定容器滚动",code:"%3Ctemplate%3E%0A%20%20%3Cdiv%20ref%3D%22targetRef%22%20class%3D%22yk-wrapper%22%3E%0A%20%20%20%20%3Cdiv%20class%3D%22yk-scroll-wrapper%22%3E%0A%20%20%20%20%20%20%3Cyk-affix%0A%20%20%20%20%20%20%20%20ref%3D%22affixRef%22%0A%20%20%20%20%20%20%20%20%3Aoffset%3D%2230%22%0A%20%20%20%20%20%20%20%20%3Atarget%3D%22targetRef%22%0A%20%20%20%20%20%20%20%20style%3D%22margin-top%3A%2060px%22%0A%20%20%20%20%20%20%3E%0A%20%20%20%20%20%20%20%20%3Cyk-button%3EAffix%20Top%20in%20container%3C%2Fyk-button%3E%0A%20%20%20%20%20%20%3C%2Fyk-affix%3E%0A%20%20%20%20%3C%2Fdiv%3E%0A%20%20%3C%2Fdiv%3E%0A%3C%2Ftemplate%3E%0A%3Cscript%20lang%3D%22ts%22%20setup%3E%0Aimport%20%7B%20shallowRef%2C%20onMounted%2C%20onUnmounted%20%7D%20from%20'vue'%0Aconst%20targetRef%20%3D%20shallowRef%3CHTMLElement%3E()%0Aconst%20affixRef%20%3D%20shallowRef()%0AonMounted(()%20%3D%3E%20%7B%0A%20%20window.addEventListener('scroll'%2C%20affixRef.value%3F.updatePosition%2C%20true)%0A%7D)%0AonUnmounted(()%20%3D%3E%20%7B%0A%20%20window.removeEventListener('scroll'%2C%20affixRef.value%3F.updatePosition%2C%20true)%0A%7D)%0A%3C%2Fscript%3E%0A%3Cstyle%20scoped%3E%0A.yk-wrapper%20%7B%0A%20%20overflow%3A%20auto%3B%0A%20%20height%3A%20200px%3B%0A%7D%0A%0A.yk-scroll-wrapper%20%7B%0A%20%20overflow%3A%20hidden%3B%0A%20%20height%3A%20400px%3B%0A%20%20background-color%3A%20%23d4e1ff%3B%0A%7D%0A%3C%2Fstyle%3E%0A"},{demo:o(()=>[n(xt)]),desc:o(()=>[Ct]),_:1}),n(e,{level:3,id:"API"},{default:o(()=>[l("API")]),_:1}),Et,kt,bt,wt,Dt,Ft]),_:1})}}};export{Rt as default};
