import{d as j,dD as q,c as _,e as A,o as C,b as N,F as K,i as Q,n as g,dq as a,dY as F,j as L,f as G,dr as Z,r as R,dW as ee,ey as c,dE as te,dG as ne,eg as ae,dF as U,w as $,g as le,ez as oe,dU as se}from"./index-cf5518e5.js";import{_ as P}from"./index-88f50875.js";const re=["onClick"],ue=["onClick"],ie=j({inheritAttrs:!1,__name:"slider-marks",props:{modelValue:{default:()=>[]},percentStart:{default:0},percentEnd:{default:0},rangeMin:{default:0},rangeMax:{default:100}},emits:["position"],setup(o,{emit:E}){const e=o,i=q("slider"),v=_(()=>{const w=e.rangeMax-e.rangeMin;return e.modelValue.map(M=>{const l=M.key-e.rangeMin,d=Math.round(l/w*100)||0,r=d/100;return{...M,percent:d,isOver:r===e.percentStart||r===e.percentEnd,isOvered:r>e.percentStart&&r<e.percentEnd,markInfo:M.labelNode||A("span",{style:M.style},M.label)}})});return(w,M)=>(C(),N("div",{class:g(a(i)("marks"))},[(C(!0),N(K,null,Q(v.value,l=>(C(),N("div",{key:l.key,class:g(a(i)("mark-item",{over:l.isOver,overed:l.isOvered})),style:F({left:l.percent+"%"})},[L("div",{class:g(a(i)("mark-item-pointer")),onClick:d=>E("position",l.percent)},null,10,re),L("div",{class:g(a(i)("mark-item-box")),onClick:d=>E("position",l.percent)},[(C(),G(Z(l.markInfo)))],10,ue)],6))),128))],2))}}),W=o=>o<=0?0:o>=100?100:o,de=(o,E,e,i,v,w,M)=>{let l=0,d=null,r=0;const k=R(!0),u=R(!1),S=s=>{ee(()=>{let n=Math.round(i.value/e.value*100),t=Math.round(v.value/e.value*100);n=W(n),t=W(t);const f=o.max-o.min,I=f*n/100+o.min,T=f*t/100+o.min,O=w.value?[I,T]:T;M(s,O)})},m=s=>{let n=i.value,t=v.value;if(w.value){if(k.value?(t=s>=l?l:s,t=t<=0?0:t):(n=s>=l?l:s,n=n<=0?0:n),n>=t){const f=n;n=t,t=f,k.value=!k.value}}else t=s>=l?l:s,t=t<=0?0:t;i.value=n,v.value=t,S("update:modelValue")},y=s=>{const n=d;if(o.direction===c[1])if(s.clientX>=n.left&&s.clientX<=n.right){const t=s.clientX-n.left,f=Math.round(t/r)*r;m(f)}else{const t=s.clientX<n.left?-9999:9999;m(t)}else if(o.direction===c[0])if(s.clientY>=n.top&&s.clientY<=n.bottom){const t=n.bottom-s.clientY,f=Math.round(t/r)*r;m(f)}else{const t=s.clientY<n.top?9999:-9999;m(t)}},V=()=>{u.value=!0,l=e.value,window.addEventListener("mousemove",y),window.addEventListener("mouseup",Y),d=E.value.getBoundingClientRect(),(o.direction===c[1]||o.direction===c[0])&&(r=l*o.step/100)},x=()=>{o.disabled||(V(),k.value=!1)},z=()=>{o.disabled||(V(),k.value=!0)},Y=()=>{u.value=!1,window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",Y),S("change")};return{isEndBtn:k,moving:u,handleStartMouseDown:x,handleEndMouseDown:z,emitValue:S}},ce=j({name:"YkSlider",__name:"slider",props:{modelValue:{default:0},disabled:{type:Boolean,default:!1},min:{default:0},max:{default:100},direction:{default:c[1]},step:{default:1},marks:{default:()=>[]},height:{default:200},showInput:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(o,{emit:E}){const e=o,i=q("slider"),{modelValue:v,marks:w,min:M,max:l}=te(e),d=R(),r=_(()=>Array.isArray(v.value)),k=_(()=>e.max-e.min),u=R(0),S=()=>{e.direction===c[1]?u.value=d.value?d.value.offsetWidth:0:e.direction===c[0]&&(u.value=d.value?d.value.offsetHeight:0)};ne(()=>{S(),window.addEventListener("resize",S)}),ae(()=>{window.removeEventListener("resize",S)});const m=R(0),y=R(0),V=_(()=>{if(r.value){const h=(v.value[0]||0)-e.min;return Math.round(h/k.value*100)/100}else return 0}),x=_(()=>{if(r.value){const h=(v.value[1]||0)-e.min;return Math.round(h/k.value*100)/100}else{const p=v.value;return Math.round(p/k.value*100)/100}}),z=_(()=>r.value?(v.value[0]||0).toString():"0"),Y=_(()=>r.value?(v.value[1]||0).toString():v.value.toString()),s=_(()=>e.direction===c[1]?"top":"right"),n=_(()=>e.direction===c[1]?{height:"2px"}:e.direction===c[0]?{height:e.height+"px",width:"2px"}:{}),t=_(()=>e.direction===c[1]?{top:0,height:"2px",left:m.value+"px",width:y.value-m.value+"px"}:e.direction===c[0]?{left:0,width:"2px",bottom:m.value+"px",height:y.value-m.value+"px"}:{}),{moving:f,isEndBtn:I,handleStartMouseDown:T,handleEndMouseDown:O,emitValue:H}=de(e,d,u,m,y,r,E);U(V,()=>{f.value||(m.value=V.value*u.value)},{immediate:!0}),U(x,()=>{f.value||(y.value=x.value*u.value)},{immediate:!0}),U(u,()=>{m.value=V.value*u.value,y.value=x.value*u.value},{immediate:!0});const X=p=>{if(e.disabled)return;let h=p/100;if(r.value){const B=Math.abs(V.value-h),D=Math.abs(x.value-h);B>=D?y.value=h*u.value:m.value=h*u.value}else y.value=h*u.value;H("update:modelValue")},J=p=>{if(e.disabled)return;const B=d.value.getBoundingClientRect();if(e.direction===c[1]){const D=p.clientX-B.left;let b=Math.round(D/u.value*100);b=Math.round(b/e.step)*e.step,X(b)}else if(e.direction===c[0]){const D=u.value-(p.clientY-B.top);let b=Math.round(D/u.value*100);b=Math.round(b/e.step)*e.step,X(b)}};return(p,h)=>(C(),N("div",{class:g(a(i)({withMarks:!!a(w).length,disabled:p.disabled},[p.direction]))},[L("div",{ref_key:"runwayRef",ref:d,class:g(a(i)("runway")),style:F(n.value),onClick:J},[L("div",{class:g(a(i)("bar")),style:F(t.value)},[r.value?(C(),G(a(P),{key:0,class:g(a(i)("button",{start:!0})),placement:s.value,open:a(f)&&!a(I),trigger:"hover",title:z.value,onMousedown:a(T)},{default:$(()=>[L("div",{class:g(a(i)("tooltipSpan"))},null,2)]),_:1},8,["class","placement","open","title","onMousedown"])):le("",!0),A(a(P),{class:g(a(i)("button",{end:!0})),placement:s.value,open:a(f)&&a(I),trigger:"hover",title:Y.value,onMousedown:a(O)},{default:$(()=>[L("div",{class:g(a(i)("tooltipSpan"))},null,2)]),_:1},8,["class","placement","open","title","onMousedown"])],6)],6),A(ie,{modelValue:a(w),"onUpdate:modelValue":h[0]||(h[0]=B=>oe(w)?w.value=B:null),"range-min":a(M),"range-max":a(l),"percent-start":V.value,"percent-end":x.value,onPosition:X},null,8,["modelValue","range-min","range-max","percent-start","percent-end"])],2))}}),ve=se(ce),pe=ve;export{ve as Y,pe as _};
