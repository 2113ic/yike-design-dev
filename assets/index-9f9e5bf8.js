import{d as J,a2 as Q,a3 as U,r as d,Z as e,c as W,a4 as x,o as u,b as r,e as f,n,X as v,g as i,y as ee,i as b,A as ae,t as S,ay as le,ao as se,w as oe,a0 as te,F as ne,z as ue}from"./index-b6eede26.js";import{I as re}from"./index-55f82c84.js";import{u as ie}from"./use-form-item-152393d9.js";const de=["id","name","placeholder","disabled","readonly","required","type","value","aria-disabled"],pe={key:0},ce=J({name:"YkInput",__name:"input",props:{id:{},name:{},size:{default:"l"},type:{default:"text"},placeholder:{},modelValue:{default:""},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},visible:{type:Boolean,default:!0},status:{default:"primary"},loading:{type:Boolean,default:!1},showCounter:{type:Boolean,default:!1},limit:{default:-1},style:{},message:{default:""},inputStyle:{}},emits:["focus","blur","clear","change","submit","keydown","update:modelValue","hoverin","hoverout"],setup(q,{expose:E,emit:o}){const s=q,t=Q("input"),{disabled:$,status:h,message:g,size:T,inputStyle:N}=U(s),{mergedDisabled:c,isError:k,mergedStatus:R,mergedSize:_,validate:w}=ie({disabled:$,status:h,message:g,size:T}),y=d(!1),I=s.limit>0,D=s.showCounter&&I,L=s.type==="password"&&!s.disabled&&s.visible;let l=e(s.modelValue);const z=d(l.length),p=d(),m=d(!1),C=d(!1),F=d(l.length>0),B=d(s.type),M=()=>{s.disabled||s.readonly||(m.value=!0,w("focus"),o("focus",l))},V=()=>{var a;s.disabled||s.readonly||(l=((a=p.value)==null?void 0:a.value)??"",I&&!y.value&&l.length>s.limit&&(l=l.slice(0,s.limit),p.value.value=l),F.value=l.length>0,z.value=l.length,w("change"),o("update:modelValue",l),o("change",l))},P=()=>{m.value=!1,w("blur"),o("blur",l)},A=()=>{C.value=!0,o("hoverin")},H=()=>{C.value=!1,o("hoverout")},K=()=>{p.value.value="",p.value.focus(),V(),o("clear","")},O=()=>{y.value=!0},X=()=>{y.value=!1,V()},Z=a=>{a.key==="Enter"&&!y.value&&o("submit"),o("keydown",a)},j=()=>{B.value=B.value==="text"?"password":"text"},Y=W(()=>({"yk-input__button":!0,"yk-input__button-show":F.value&&(s.clearable||s.visible)&&(m.value||C.value)})),G=a=>{l=a,o("update:modelValue",l),o("change",l)};return x(()=>s.modelValue,a=>{l=a,o("update:modelValue",l)}),E({inputRef:p,setValue:G}),(a,fe)=>(u(),r(ne,null,[f("div",se({class:e(t)(),style:a.style},a.$attrs,{onMouseenter:A,onMouseleave:H}),[a.$slots.prepend?(u(),r("span",{key:0,class:n(e(t)("prepend"))},[v(a.$slots,"prepend")],2)):i("",!0),f("div",{class:n([e(t)("inner"),e(t)({[`${e(h)}`]:!e(c),[`${e(h)}--focus`]:m.value&&!e(c)&&!e(k),loading:a.loading,disabled:e(c),readonly:a.readonly,rightbr0:!!a.$slots.append,leftbr0:!!a.$slots.prepend,error:e(k),"error-focus":e(k)}),e(t)([e(_)])])},[v(a.$slots,"prefix"),f("input",{id:a.id,ref_key:"inputRef",ref:p,name:a.name,placeholder:a.placeholder,disabled:e(c),readonly:a.readonly,required:a.required,class:n(e(t)("widget")),type:B.value,tabindex:"0",value:e(l),"aria-disabled":e(c),style:ee(e(N)),onFocus:M,onInput:V,onBlur:P,onCompositionstart:O,onCompositionend:X,onKeydown:Z},null,46,de),f("div",{class:n(e(t)("buttons"))},[e(L)?(u(),r("button",{key:0,"aria-label":"查看/隐藏密码",class:n(["yk-input__button",Y.value]),onClick:j},[b(e(re))],2)):i("",!0),a.clearable&&!e($)?(u(),r("button",{key:1,"aria-label":"清空内容",class:n(["yk-input__button",Y.value]),onClick:K},[b(e(ae))],2)):i("",!0)],2),a.showCounter?(u(),r("div",{key:0,class:n(e(t)("counter"))},[f("span",null,S(z.value),1),e(D)?(u(),r("span",pe," / "+S(a.limit),1)):i("",!0)],2)):i("",!0),a.loading?(u(),r("div",{key:1,class:n(e(t)("spinner"))},[b(e(le))],2)):i("",!0),v(a.$slots,"suffix")],2),a.$slots.append?(u(),r("span",{key:1,class:n(e(t)("append"))},[v(a.$slots,"append")],2)):i("",!0)],16),b(te,{name:"fade"},{default:oe(()=>[e(g)?(u(),r("div",{key:0,class:n(e(t)("hint",[e(R)]))},S(e(g)),3)):i("",!0)]),_:1})],64))}}),be=ue(ce);export{be as Y};
