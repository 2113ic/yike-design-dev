import{r as D,dx as v,dv as S,d as _,ee as w,ep as A,dS as V,c as Y,p as P,m as N,a as f,o as h,b as R,e,i as o,dF as j,dJ as J,dH as M,n as O,eV as U,dC as z,dE as K,dL as H,f as k,w as E,j as C,s as G}from"./index-2e6203f3.js";import{Y as F}from"./index-2aa44a00.js";import{Y as Q}from"./index-c922d048.js";import"./use-form-item-95286ffe.js";const W={data:{type:Array,default:()=>[]}},X={type:{type:String,default:"default"},align:{type:String,default:"left"},property:String,label:String,formatter:Function},T=Symbol("YkTable"),Z=function(a=[]){const t=S(),n=D(a),l=D([]),r=D([]),c=D(!1);return{state:{data:n,columns:l,selection:r,isAllSelected:c},action:{insertColumn(s,i){const u=v(s.columns);u.push(i),$(u),s.columns.value=u},removeColumn(s,i){const u=v(s.columns),y=u.findIndex(B=>B===i);y>-1&&u.splice(y,1),$(u),s.columns.value=u},toggleRowSelection(s,i,u){const y=v(s.selection),B=y.indexOf(i),I=B!==-1;u&&!I?y.push(i):!u&&I&&y.splice(B,1),s.selection.value=y,s.data.value.length===y.length?s.isAllSelected.value=!0:s.isAllSelected.value=!1;const L=(s.selection.value||[]).slice();t.emit("select",L,i),t.emit("selection-change",L)},toggleAllSelection(s,i){s.data.value.forEach(u=>{this.toggleRowSelection(s,u,i)}),t.emit("select-all",r.value)}},dispatch:function(s,...i){const u=t.store.action;if(u[s])u[s](t.store.state,...i);else throw new Error(`Action not found: ${s}`)},isSelected:function(s){return r.value.includes(s)}}};function $(a){a.forEach(t=>{var n;t.index=(n=t.getColumnIndex)==null?void 0:n.call(t)}),a.sort((t,n)=>t.index-n.index)}const ee=_({components:{YkCheckbox:F},setup(){const a=w(T),t=a==null?void 0:a.store;return{columnList:t==null?void 0:t.state.columns,bem:a.bem}},render(){const{columnList:a,bem:t}=this;return A("thead",{class:[t("header")]},A("tr",{},a==null?void 0:a.map((n,l)=>A("th",{class:[t("cell")]},n.renderHeader({column:n,index:l})))))}}),te=_({setup(){const a=w(T),t=a.store,n=t==null?void 0:t.state.columns;return{store:t,columnList:n,bem:a.bem}},render(){const{columnList:a,store:t,bem:n}=this,l=(t==null?void 0:t.state.data.value)||[];return A("tbody",{class:[n("body")]},l.map(r=>A("tr",{class:[n("row")]},a.map((c,m)=>{const b={row:r,index:m,column:c},d=c.renderCell(b);return A("td",{class:[n("cell"),`text-${c.align}`]},[d])}))))}});let le=1;const ne=_({name:"YkTable",components:{TableHeader:ee,TableBody:te},props:W,emits:["select","selection-change","select-all"],setup(a){const t=V("table"),n=S();n.bem=t;const l=Z();l.state.data.value=a.data,n.store=l;const r=`yk-table_${le++}`;n.tableId=r;const c=Y(()=>(l.state.data.value||[]).length===0);return P(T,n),{bem:t,tableId:r,store:l,isEmpty:c}}}),ae={ref:"hiddenColumns"};function oe(a,t,n,l,r,c){const m=f("TableHeader"),b=f("TableBody");return h(),R("div",{class:O(a.bem())},[e("table",null,[o(m),o(b)]),j(e("div",ae,[M(a.$slots,"default")],512),[[J,!1]])],2)}const ce=N(ne,[["render",oe]]);let se=1;const re=_({name:"YkTableColumn",components:{YkCheckbox:F},props:X,setup(a,{slots:t}){const n=S(),l=D({}),r=`column_${se++}`,c=Y(()=>{let d=n.parent;for(;d&&!(d!=null&&d.tableId);)d=d.parent;return d}),m=c.value.store,b=({row:d,column:p,index:s})=>{var y;const i=p.property,u=i&&d[i];return p&&p.type=="checkbox"?A(F,{checked:m.isSelected(d),onChange(B){m.dispatch("toggleRowSelection",d,B)}}):p&&p.formatter?p.formatter(d,p,u,s):((y=u==null?void 0:u.toString)==null?void 0:y.call(u))||""};return U(()=>{l.value={id:r,type:a.type,align:a.align,property:a.property,label:a.label,formatter:a.formatter,renderCell:d=>{let p=null;if(t.default){const s=t.default(d);p=s.some(i=>i.type!==Comment)?s:b(d)}else p=b(d);return A("div",{class:["cell"]},[p])},renderHeader:({column:d,index:p})=>{const s=t.header;let i=null;return d.type==="checkbox"?i=A(F,{checked:m.state.isAllSelected.value,indeterminate:m.state.selection.value.length>0&&!m.state.isAllSelected.value,onChange:u=>{m.dispatch("toggleAllSelection",u)}}):i=d.label,A("div",{class:"cell"},[s?s({column:d,index:p}):i])}}}),z(()=>{var i;const d=(i=c.value.refs.hiddenColumns)==null?void 0:i.children,p=()=>Array.from(d).findIndex(u=>u==n.vnode.el);l.value.getColumnIndex=p,p()>-1&&c.value.store.dispatch("insertColumn",l.value)}),K(()=>{c.value.store.dispatch("removeColumn",l.value)}),{columnId:r,columnConfig:l}},render(){var t,n;const a=(n=(t=this.$slots).default)==null?void 0:n.call(t,{row:{},column:{},$index:-1});return a?A("div",a):A("div",[])}}),g=H(ce),x=H(re);const de=_({__name:"table-primary",setup(a){const t=[];for(let n=0;n<5;n++)t.push({name:"浩哥看沟通",email:"xigeotmete@qq.com",bir:"1994.03.12",desc:"这句话不知道 当讲不当讲，反正就是想讲一讲的"});return(n,l)=>{const r=x,c=g;return h(),k(c,{data:t},{default:E(()=>[o(r,{property:"name",label:"用户名"}),o(r,{property:"email",label:"邮箱"}),o(r,{property:"bir",label:"生日"}),o(r,{property:"desc",label:"简介"})]),_:1})}}}),ue=_({__name:"table-checkbox",setup(a){const t=[];for(let l=0;l<5;l++)t.push({name:"浩哥看沟通",email:"xigeotmete@qq.com",bir:"1994.03.12",desc:"这句话不知道 当讲不当讲，反正就是想讲一讲的"});const n=l=>{console.log(l)};return(l,r)=>{const c=x,m=g;return h(),k(m,{data:t,onSelectionChange:n},{default:E(()=>[o(c,{type:"checkbox"}),o(c,{property:"name",label:"用户名"}),o(c,{property:"email",label:"邮箱"}),o(c,{property:"bir",label:"生日"}),o(c,{property:"desc",label:"简介"})]),_:1})}}}),ie=_({__name:"table-custom",setup(a){const t=[];for(let l=0;l<5;l++)t.push({name:"浩哥看沟通",email:"xigeotmete@qq.com",bir:"1994.03.12"});const n=l=>{console.log(l)};return(l,r)=>{const c=x,m=G,b=g;return h(),k(b,{data:t,onSelectionChange:n},{default:E(()=>[o(c,{property:"name",label:"用户名"}),o(c,{property:"email",label:"邮箱"}),o(c,{property:"bir",label:"生日"}),o(c,{property:"desc",label:"操作"},{default:E(()=>[o(m,{type:"secondary",status:"primary"},{default:E(()=>[C("添加")]),_:1}),o(m,{type:"outline",status:"primary",style:{"margin-left":"8px"}},{default:E(()=>[C(" 删除 ")]),_:1})]),_:1})]),_:1})}}}),q="",Ee=_({__name:"table-custom-header",setup(a){const t=D([]);for(let l=0;l<5;l++)t.value.push({name:"浩哥看沟通",email:"xigeotmete@qq.com",bir:"1994.03.12",desc:"这句话不知道 当讲不当讲，反正就是想讲一讲的"});const n=({column:l,index:r})=>{console.log(l)};return(l,r)=>{const c=x,m=Q,b=g;return h(),k(b,{data:t.value},{default:E(()=>[o(c,{property:"name",label:"用户名"}),o(c,{property:"email",label:"邮箱"}),o(c,{property:"bir",label:"生日"}),o(c,{property:"desc",label:"操作"},{header:E(d=>[o(m,{modelValue:q,"onUpdate:modelValue":r[0]||(r[0]=p=>q=p),placeholder:"Type to search",onInput:p=>n(d)},null,8,["onInput"])]),_:1})]),_:1},8,["data"])}}}),pe=e("p",null,"这里展示基本用法",-1),me=e("p",null,"可以选择多行数据",-1),Ae=e("p",null,"自定义列的显示内容，可组合其他组件使用",-1),be=e("p",null,"通过设置 slot 来自定义表头。",-1),ye=e("div",{class:"table-container"},[e("table",null,[e("thead",null,[e("tr",null,[e("th",null,"参数"),e("th",null,"描述"),e("th",null,"类型"),e("th",null,"默认值")])]),e("tbody",null,[e("tr",null,[e("td",null,"data"),e("td",null,"显示的数据"),e("td",null,"array"),e("td",null,"—")])])])],-1),Ce=e("div",{class:"table-container"},[e("table",null,[e("thead",null,[e("tr",null,[e("th",null,"参数"),e("th",null,"描述"),e("th",null,"回调参数")])]),e("tbody",null,[e("tr",null,[e("td",null,"select"),e("td",null,"当用户手动勾选数据行的 Checkbox 时触发的事件"),e("td",null,"selection, row")]),e("tr",null,[e("td",null,"select-all"),e("td",null,"当用户手动勾选全选 Checkbox 时触发的事件"),e("td",null,"selection")]),e("tr",null,[e("td",null,"selection-change"),e("td",null,"当选择项发生变化时会触发该事件"),e("td",null,"selection")])])])],-1),_e=e("div",{class:"table-container"},[e("table",null,[e("thead",null,[e("tr",null,[e("th",null,"参数"),e("th",null,"描述"),e("th",null,"类型"),e("th",null,"默认值")])]),e("tbody",null,[e("tr",null,[e("td",null,"type"),e("td",null,"type"),e("td",null,"selection /default"),e("td",null,"default")]),e("tr",null,[e("td",null,"label"),e("td",null,"显示的标题"),e("td",null,[e("code",null,"string ")]),e("td",null,"—")]),e("tr",null,[e("td",null,"property"),e("td",null,"对应列内容的字段名"),e("td",null,[e("code",null,"string")]),e("td",null,"—")]),e("tr",null,[e("td",null,"formatter"),e("td",null,"用来格式化内容"),e("td",null,"function(row, column, cellValue, index)"),e("td",null,"—")]),e("tr",null,[e("td",null,"align"),e("td",null,"对齐方式"),e("td",null,"left / center / right"),e("td",null,"left")])])])],-1),Be=e("div",{class:"table-container"},[e("table",null,[e("thead",null,[e("tr",null,[e("th",null,"参数"),e("th",null,"描述")])]),e("tbody",null,[e("tr",null,[e("td",null,"default"),e("td",null,"自定义列的内容 作用域参数为 { row, column, index }")]),e("tr",null,[e("td",null,"header"),e("td",null,"自定义表头的内容， 作用域参数为 { column, index }")])])])],-1),Fe={__name:"doc",setup(a){return(t,n)=>{const l=f("yk-title"),r=f("yk-snippet"),c=f("DocPage");return h(),k(c,null,{default:E(()=>[o(l,{level:2,id:"YkTable-表格"},{default:E(()=>[C("YkTable 表格")]),_:1}),o(r,{title:"基本用法",code:"%3Ctemplate%3E%0A%20%20%3Cyk-table%20%3Adata%3D%22dataList%22%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22name%22%20label%3D%22%E7%94%A8%E6%88%B7%E5%90%8D%22%3E%3C%2Fyk-table-column%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22email%22%20label%3D%22%E9%82%AE%E7%AE%B1%22%3E%3C%2Fyk-table-column%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22bir%22%20label%3D%22%E7%94%9F%E6%97%A5%22%3E%3C%2Fyk-table-column%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22desc%22%20label%3D%22%E7%AE%80%E4%BB%8B%22%3E%3C%2Fyk-table-column%3E%0A%20%20%3C%2Fyk-table%3E%0A%3C%2Ftemplate%3E%0A%3Cscript%20setup%20lang%3D%22ts%22%3E%0Aconst%20dataList%20%3D%20%5B%5D%0Afor%20(let%20index%20%3D%200%3B%20index%20%3C%205%3B%20index%2B%2B)%20%7B%0A%20%20dataList.push(%7B%0A%20%20%20%20name%3A%20'%E6%B5%A9%E5%93%A5%E7%9C%8B%E6%B2%9F%E9%80%9A'%2C%0A%20%20%20%20email%3A%20'xigeotmete%40qq.com'%2C%0A%20%20%20%20bir%3A%20'1994.03.12'%2C%0A%20%20%20%20desc%3A%20'%E8%BF%99%E5%8F%A5%E8%AF%9D%E4%B8%8D%E7%9F%A5%E9%81%93%20%E5%BD%93%E8%AE%B2%E4%B8%8D%E5%BD%93%E8%AE%B2%EF%BC%8C%E5%8F%8D%E6%AD%A3%E5%B0%B1%E6%98%AF%E6%83%B3%E8%AE%B2%E4%B8%80%E8%AE%B2%E7%9A%84'%2C%0A%20%20%7D)%0A%7D%0A%3C%2Fscript%3E%0A"},{demo:E(()=>[o(de)]),desc:E(()=>[pe]),_:1}),o(r,{title:"多选",code:"%3Ctemplate%3E%0A%20%20%3Cyk-table%20%3Adata%3D%22dataList%22%20%40selection-change%3D%22handleSelectionChange%22%3E%0A%20%20%20%20%3Cyk-table-column%20type%3D%22checkbox%22%3E%3C%2Fyk-table-column%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22name%22%20label%3D%22%E7%94%A8%E6%88%B7%E5%90%8D%22%3E%3C%2Fyk-table-column%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22email%22%20label%3D%22%E9%82%AE%E7%AE%B1%22%3E%3C%2Fyk-table-column%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22bir%22%20label%3D%22%E7%94%9F%E6%97%A5%22%3E%3C%2Fyk-table-column%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22desc%22%20label%3D%22%E7%AE%80%E4%BB%8B%22%3E%3C%2Fyk-table-column%3E%0A%20%20%3C%2Fyk-table%3E%0A%3C%2Ftemplate%3E%0A%3Cscript%20setup%20lang%3D%22ts%22%3E%0Aconst%20dataList%20%3D%20%5B%5D%0Afor%20(let%20index%20%3D%200%3B%20index%20%3C%205%3B%20index%2B%2B)%20%7B%0A%20%20dataList.push(%7B%0A%20%20%20%20name%3A%20'%E6%B5%A9%E5%93%A5%E7%9C%8B%E6%B2%9F%E9%80%9A'%2C%0A%20%20%20%20email%3A%20'xigeotmete%40qq.com'%2C%0A%20%20%20%20bir%3A%20'1994.03.12'%2C%0A%20%20%20%20desc%3A%20'%E8%BF%99%E5%8F%A5%E8%AF%9D%E4%B8%8D%E7%9F%A5%E9%81%93%20%E5%BD%93%E8%AE%B2%E4%B8%8D%E5%BD%93%E8%AE%B2%EF%BC%8C%E5%8F%8D%E6%AD%A3%E5%B0%B1%E6%98%AF%E6%83%B3%E8%AE%B2%E4%B8%80%E8%AE%B2%E7%9A%84'%2C%0A%20%20%7D)%0A%7D%0Aconst%20handleSelectionChange%20%3D%20(val)%20%3D%3E%20%7B%0A%20%20console.log(val)%0A%7D%0A%3C%2Fscript%3E%0A"},{demo:E(()=>[o(ue)]),desc:E(()=>[me]),_:1}),o(r,{title:"自定义列",code:"%3Ctemplate%3E%0A%20%20%3Cyk-table%20%3Adata%3D%22dataList%22%20%40selection-change%3D%22handleSelectionChange%22%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22name%22%20label%3D%22%E7%94%A8%E6%88%B7%E5%90%8D%22%3E%3C%2Fyk-table-column%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22email%22%20label%3D%22%E9%82%AE%E7%AE%B1%22%3E%3C%2Fyk-table-column%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22bir%22%20label%3D%22%E7%94%9F%E6%97%A5%22%3E%3C%2Fyk-table-column%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22desc%22%20label%3D%22%E6%93%8D%E4%BD%9C%22%3E%0A%20%20%20%20%20%20%3Cyk-button%20type%3D%22secondary%22%20status%3D%22primary%22%3E%E6%B7%BB%E5%8A%A0%3C%2Fyk-button%3E%0A%20%20%20%20%20%20%3Cyk-button%20type%3D%22outline%22%20status%3D%22primary%22%20style%3D%22margin-left%3A%208px%22%3E%0A%20%20%20%20%20%20%20%20%E5%88%A0%E9%99%A4%0A%20%20%20%20%20%20%3C%2Fyk-button%3E%0A%20%20%20%20%3C%2Fyk-table-column%3E%0A%20%20%3C%2Fyk-table%3E%0A%3C%2Ftemplate%3E%0A%3Cscript%20setup%20lang%3D%22ts%22%3E%0Aconst%20dataList%20%3D%20%5B%5D%0Afor%20(let%20index%20%3D%200%3B%20index%20%3C%205%3B%20index%2B%2B)%20%7B%0A%20%20dataList.push(%7B%0A%20%20%20%20name%3A%20'%E6%B5%A9%E5%93%A5%E7%9C%8B%E6%B2%9F%E9%80%9A'%2C%0A%20%20%20%20email%3A%20'xigeotmete%40qq.com'%2C%0A%20%20%20%20bir%3A%20'1994.03.12'%2C%0A%20%20%20%20%2F%2F%20desc%3A%20'%E8%BF%99%E5%8F%A5%E8%AF%9D%E4%B8%8D%E7%9F%A5%E9%81%93%20%E5%BD%93%E8%AE%B2%E4%B8%8D%E5%BD%93%E8%AE%B2%EF%BC%8C%E5%8F%8D%E6%AD%A3%E5%B0%B1%E6%98%AF%E6%83%B3%E8%AE%B2%E4%B8%80%E8%AE%B2%E7%9A%84'%2C%0A%20%20%7D)%0A%7D%0Aconst%20handleSelectionChange%20%3D%20(val)%20%3D%3E%20%7B%0A%20%20console.log(val)%0A%7D%0A%3C%2Fscript%3E%0A"},{demo:E(()=>[o(ie)]),desc:E(()=>[Ae]),_:1}),o(r,{title:"自定义表头",code:"%3Ctemplate%3E%0A%20%20%3Cyk-table%20%3Adata%3D%22dataList%22%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22name%22%20label%3D%22%E7%94%A8%E6%88%B7%E5%90%8D%22%3E%3C%2Fyk-table-column%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22email%22%20label%3D%22%E9%82%AE%E7%AE%B1%22%3E%3C%2Fyk-table-column%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22bir%22%20label%3D%22%E7%94%9F%E6%97%A5%22%3E%3C%2Fyk-table-column%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22desc%22%20label%3D%22%E6%93%8D%E4%BD%9C%22%3E%0A%20%20%20%20%20%20%3Ctemplate%20%23header%3D%22scope%22%3E%0A%20%20%20%20%20%20%20%20%3Cyk-input%0A%20%20%20%20%20%20%20%20%20%20v-model%3D%22search%22%0A%20%20%20%20%20%20%20%20%20%20placeholder%3D%22Type%20to%20search%22%0A%20%20%20%20%20%20%20%20%20%20%40input%3D%22handleInput(scope)%22%0A%20%20%20%20%20%20%20%20%2F%3E%0A%20%20%20%20%20%20%3C%2Ftemplate%3E%0A%20%20%20%20%3C%2Fyk-table-column%3E%0A%20%20%3C%2Fyk-table%3E%0A%3C%2Ftemplate%3E%0A%3Cscript%20setup%20lang%3D%22ts%22%3E%0Aimport%20%7B%20ref%20%7D%20from%20'vue'%0Aconst%20search%20%3D%20''%0Aconst%20dataList%20%3D%20ref(%5B%5D)%0Afor%20(let%20index%20%3D%200%3B%20index%20%3C%205%3B%20index%2B%2B)%20%7B%0A%20%20dataList.value.push(%7B%0A%20%20%20%20name%3A%20'%E6%B5%A9%E5%93%A5%E7%9C%8B%E6%B2%9F%E9%80%9A'%2C%0A%20%20%20%20email%3A%20'xigeotmete%40qq.com'%2C%0A%20%20%20%20bir%3A%20'1994.03.12'%2C%0A%20%20%20%20desc%3A%20'%E8%BF%99%E5%8F%A5%E8%AF%9D%E4%B8%8D%E7%9F%A5%E9%81%93%20%E5%BD%93%E8%AE%B2%E4%B8%8D%E5%BD%93%E8%AE%B2%EF%BC%8C%E5%8F%8D%E6%AD%A3%E5%B0%B1%E6%98%AF%E6%83%B3%E8%AE%B2%E4%B8%80%E8%AE%B2%E7%9A%84'%2C%0A%20%20%7D)%0A%7D%0Aconst%20handleInput%20%3D%20(%7B%20column%2C%20index%20%7D)%20%3D%3E%20%7B%0A%20%20console.log(column)%0A%7D%0A%3C%2Fscript%3E%0A"},{demo:E(()=>[o(Ee)]),desc:E(()=>[be]),_:1}),o(l,{level:3,id:"API"},{default:E(()=>[C("API")]),_:1}),o(l,{level:4,id:"Table-属性"},{default:E(()=>[C("Table 属性")]),_:1}),ye,o(l,{level:4,id:"Table-事件"},{default:E(()=>[C("Table 事件")]),_:1}),Ce,o(l,{level:4,id:"Table-column-属性"},{default:E(()=>[C("Table-column 属性")]),_:1}),_e,o(l,{level:4,id:"Table-column-插槽"},{default:E(()=>[C("Table-column 插槽")]),_:1}),Be]),_:1})}}};export{Fe as default};
