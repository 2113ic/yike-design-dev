import{d as F,dJ as H,r as V,dZ as R,dK as U,c as A,dM as E,dL as K,o as O,f as j,w as k,ea as J,j as P,n as Z,dw as a,e as f,_ as N,eU as q,eT as G,ec as Q,ey as W,d_ as X}from"./index-c0fbe197.js";import{Y as ee}from"./index-70bdc8c3.js";import{u as te}from"./use-form-item-3ae05418.js";const h=(u,l,n)=>{if(Number.isInteger(u)&&Number.isInteger(l)){const r=u+l;if(n===0)return r}const d=u.toString().split(".")[1]??"",c=l.toString().split(".")[1]??"";let o=Math.max(d.length,c.length);o>n&&(o=n);const s=10**o;return(u*s+l*s)/s},se=/[-]?(\d*\.\d+|\d+\.\d|\d+)/,ae=250,ne=60,oe=F({name:"YkInputNumber",__name:"input-number",props:{modelValue:{},max:{default:1/0},min:{default:-1/0},step:{default:1},precision:{default:0},size:{default:"l"},disabled:{type:Boolean,default:!1},message:{},formatter:{}},emits:["update:modelValue","increase","decrease"],setup(u,{emit:l}){const n=u,d=H("input-number"),c=V(!1),o=R({isMax:!1,isMin:!1}),s=U(n),t=V(0),r=V(""),{disabled:B,size:S}=s,{mergedSize:m,mergedDisabled:C}=te({disabled:B,size:S}),v=A(()=>{let e=s.precision.value;return(!Number.isInteger(e)||e>20)&&(e=0),e}),_=()=>n.max===1/0&&n.min===-1/0?0:n.min,p=()=>t.value.toFixed(v.value);let b,w;const z=e=>{if(n.disabled)return;const i=e===1?I:y;window.addEventListener("mouseup",D),b=window.setTimeout(()=>{w=window.setInterval(()=>{i()},ne)},ae)},D=()=>{b&&clearTimeout(b),w&&clearInterval(w),window.removeEventListener("mouseup",D)},g=()=>{o.isMax=t.value>=s.max.value,o.isMin=t.value<=s.min.value};E(()=>{var e;t.value=((e=s.modelValue)==null?void 0:e.value)??_(),g(),n.modelValue&&(r.value=p())});const I=()=>{t.value>=s.max.value||(t.value=h(t.value,s.step.value,v.value),x(),l("increase"))},y=()=>{t.value<=s.min.value||(t.value=h(t.value,-s.step.value,v.value),x(),l("decrease"))},$=e=>{e.key==="ArrowUp"&&I(),e.key==="ArrowDown"&&y()},L=e=>{t.value=e?Number((e.match(se)??["0"])[0]):0,v.value===0&&(t.value=Math.trunc(t.value)),g()},T=()=>{},Y=()=>{o.isMax&&(t.value=s.max.value),o.isMin&&(t.value=s.min.value),x()},x=()=>{g(),r.value=p(),l("update:modelValue",t.value)};return K(()=>n.modelValue,e=>{t.value=e??_(),r.value=p()}),(e,i)=>(O(),j(a(ee),W({"model-value":r.value,disabled:a(C),size:a(m),class:a(d)()},e.$attrs,{onFocus:T,onChange:L,onBlur:Y,onHoverin:i[2]||(i[2]=M=>c.value=!0),onHoverout:i[3]||(i[3]=M=>c.value=!1),onKeydown:$}),{suffix:k(()=>[J(P("div",{class:Z([a(d)("buttons"),a(d)([a(m)])])},[f(a(N),{disabled:o.isMax,size:a(m),type:"secondary",onClick:I,onMousedown:i[0]||(i[0]=M=>z(1))},{default:k(()=>[f(a(q))]),_:1},8,["disabled","size"]),f(a(N),{disabled:o.isMin,size:a(m),type:"secondary",onClick:y,onMousedown:i[1]||(i[1]=M=>z(0))},{default:k(()=>[f(a(G))]),_:1},8,["disabled","size"])],2),[[Q,!a(C)&&c.value]])]),_:1},16,["model-value","disabled","size","class"]))}}),ie=X(oe),de=ie;export{de as _};
