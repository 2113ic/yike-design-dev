import{d as Y,dE as E,dF as z,r as V,dU as F,c as L,dH as O,o as R,f as T,w as x,e5 as U,j as A,n as j,dr as n,e as v,_ as N,eO as K,eN as P,e7 as q,et as G,dV as J}from"./index-95fa2659.js";import{Y as Q}from"./index-c299e00a.js";import{u as W}from"./use-form-item-b033e108.js";const D=(d,i,a)=>{if(Number.isInteger(d)&&Number.isInteger(i)){const s=d+i;if(a===0)return s}const m=d.toString().split(".")[1]??"",f=i.toString().split(".")[1]??"";let l=Math.max(m.length,f.length);l>a&&(l=a);const u=10**l;return(d*u+i*u)/u},X=/[-]?(\d*\.\d+|\d+\.\d|\d+)/,Z=250,ee=150,te=Y({name:"YkInputNumber",__name:"input-number",props:{modelValue:{},max:{default:1/0},min:{default:-1/0},step:{default:1},precision:{default:0},size:{default:"l"},disabled:{type:Boolean,default:!1},formatter:{}},emits:["update:modelValue","increase","decrease"],setup(d,{emit:i}){const a=d,m=E("input-number"),{size:f}=z(a),{mergedSize:l}=W({size:f}),u=V(!1),r=F({isMax:!1,isMin:!1}),s=z(a),t=V(0),_=V(""),c=L(()=>{let e=s.precision.value;return(!Number.isInteger(e)||e>20)&&(e=0),e}),h=()=>a.max===1/0&&a.min===-1/0?0:a.min,B=()=>t.value.toFixed(c.value);let p,b;const k=e=>{if(a.disabled)return;const o=e===1?g:I;window.addEventListener("mouseup",C),p=window.setTimeout(()=>{b=window.setInterval(()=>{o()},ee)},Z)},C=()=>{p&&clearTimeout(p),b&&clearInterval(b),window.removeEventListener("mouseup",C)},w=()=>{r.isMax=t.value>=s.max.value,r.isMin=t.value<=s.min.value};O(()=>{var e;t.value=((e=s.modelValue)==null?void 0:e.value)??h(),w(),a.modelValue&&(_.value=B())});const g=()=>{t.value>=s.max.value||(t.value=D(t.value,s.step.value,c.value),y(),i("increase"))},I=()=>{t.value<=s.min.value||(t.value=D(t.value,-s.step.value,c.value),y(),i("decrease"))},S=e=>{e.key==="ArrowUp"&&g(),e.key==="ArrowDown"&&I()},$=e=>{t.value=e?Number((e.match(X)??["0"])[0]):0,c.value===0&&(t.value=Math.trunc(t.value)),w()},H=()=>{r.isMax&&(t.value=s.max.value),r.isMin&&(t.value=s.min.value),y()},y=()=>{w(),i("update:modelValue",t.value)};return(e,o)=>(R(),T(n(Q),G({"model-value":e.modelValue,disabled:e.disabled,size:n(l),class:n(m)()},e.$attrs,{onChange:$,onBlur:H,onHoverin:o[2]||(o[2]=M=>u.value=!0),onHoverout:o[3]||(o[3]=M=>u.value=!1),onKeydown:S}),{suffix:x(()=>[U(A("div",{class:j([n(m)("buttons"),n(m)([n(l)])])},[v(n(N),{disabled:r.isMax,size:n(l),type:"secondary",onClick:g,onMousedown:o[0]||(o[0]=M=>k(1))},{default:x(()=>[v(n(K))]),_:1},8,["disabled","size"]),v(n(N),{disabled:r.isMin,size:n(l),type:"secondary",onClick:I,onMousedown:o[1]||(o[1]=M=>k(0))},{default:x(()=>[v(n(P))]),_:1},8,["disabled","size"])],2),[[q,!e.disabled&&u.value]])]),_:1},16,["model-value","disabled","size","class"]))}}),se=J(te),ie=se;export{ie as _};
