import{d as Z,dD as A,dE as G,r as i,dq as e,c as J,dF as Q,o as n,b as u,j as f,n as t,dZ as m,g as d,e as b,eK as W,em as x,t as $,eL as ee,dY as ae,w as se,dX as le,dU as oe}from"./index-cf5518e5.js";import{u as te}from"./use-form-item-c6d47f35.js";const ne=["id","name","placeholder","disabled","readonly","required","type","value","aria-disabled"],ue={key:0},re=Z({name:"YkInput",__name:"input",props:{id:{},name:{},size:{default:"l"},type:{default:"text"},placeholder:{},modelValue:{default:""},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},visible:{type:Boolean,default:!0},status:{default:"primary"},loading:{type:Boolean,default:!1},showCounter:{type:Boolean,default:!1},limit:{default:-1},style:{},message:{default:""}},emits:["focus","blur","clear","change","submit","keydown","update:modelValue","hoverin","hoverout"],setup(E,{expose:F,emit:r}){const s=E,o=A("input"),{disabled:V,status:h,message:k,size:T}=G(s),{mergedDisabled:c,isError:v,mergedStatus:D,mergedSize:L,validate:g}=te({disabled:V,status:h,message:k,size:T}),w=i(!1),S=s.limit>0,N=s.showCounter&&S,R=s.type==="password"&&!s.disabled&&s.visible;let l=e(s.modelValue);const I=i(l.length),p=i(),y=i(!1),C=i(!1),Y=i(l.length>0),B=i(s.type),K=()=>{s.disabled||s.readonly||(y.value=!0,g("focus"),r("focus",l))},q=()=>{var a;s.disabled||s.readonly||(l=((a=p.value)==null?void 0:a.value)??"",S&&!w.value&&l.length>s.limit&&(l=l.slice(0,s.limit),p.value.value=l),Y.value=l.length>0,I.value=l.length,g("change"),r("update:modelValue",l),r("change",l))},M=()=>{y.value=!1,g("blur"),r("blur",l)},_=()=>{C.value=!0,r("hoverin")},j=()=>{C.value=!1,r("hoverout")},H=()=>{p.value.value="",p.value.focus(),q(),r("clear","")},O=()=>{w.value=!0},P=()=>{w.value=!1},U=a=>{a.key==="Enter"&&r("submit"),r("keydown",a)},X=()=>{B.value=B.value==="text"?"password":"text"},z=J(()=>({"yk-input__button":!0,"yk-input__button-show":Y.value&&(s.clearable||s.visible)&&(y.value||C.value)}));return Q(s,()=>{l=s.modelValue,r("update:modelValue",l)}),F({inputRef:p}),(a,de)=>(n(),u("div",{class:t(e(o)("container"))},[f("div",{class:t(e(o)()),style:ae(a.style),onMouseenter:_,onMouseleave:j},[a.$slots.prepend?(n(),u("div",{key:0,class:t(e(o)("prepend"))},[m(a.$slots,"prepend")],2)):d("",!0),f("div",{class:t([e(o)("inner"),e(o)({[`${e(h)}`]:!e(c),[`${e(h)}--focus`]:y.value&&!e(c)&&!e(v),loading:a.loading,disabled:e(c),readonly:a.readonly,rightbr0:!!a.$slots.append,leftbr0:!!a.$slots.prepend,error:e(v),"error-focus":e(v)}),e(o)([e(L)])])},[a.$slots.prefix?(n(),u("div",{key:0,class:t(e(o)(["slot","before"]))},[m(a.$slots,"prefix")],2)):d("",!0),f("input",{id:a.id,ref_key:"inputRef",ref:p,name:a.name,placeholder:a.placeholder,disabled:e(c),readonly:a.readonly,required:a.required,class:t(e(o)("widget")),type:B.value,tabindex:"0",value:e(l),"aria-disabled":e(c),onFocus:K,onInput:q,onBlur:M,onCompositionstart:O,onCompositionend:P,onKeydown:U},null,42,ne),f("div",{class:t(e(o)("buttons"))},[e(R)?(n(),u("button",{key:0,"aria-label":"查看/隐藏密码",class:t(["yk-input__button",z.value]),onClick:X},[b(e(W))],2)):d("",!0),a.clearable&&!e(V)?(n(),u("button",{key:1,"aria-label":"清空内容",class:t(["yk-input__button",z.value]),onClick:H},[b(e(x))],2)):d("",!0)],2),a.showCounter?(n(),u("div",{key:1,class:t(e(o)("counter"))},[f("span",null,$(I.value),1),e(N)?(n(),u("span",ue," / "+$(a.limit),1)):d("",!0)],2)):d("",!0),a.loading?(n(),u("div",{key:2,class:t(e(o)("spinner"))},[b(e(ee))],2)):d("",!0),a.$slots.suffix?(n(),u("div",{key:3,class:t(e(o)(["slot","after"]))},[m(a.$slots,"suffix")],2)):d("",!0)],2),a.$slots.append?(n(),u("div",{key:1,class:t(e(o)("append"))},[m(a.$slots,"append")],2)):d("",!0)],38),b(le,{name:"fade"},{default:se(()=>[!e(v)&&e(k)?(n(),u("div",{key:0,class:t(e(o)("hint",[e(D)]))},$(e(k)),3)):d("",!0)]),_:1})],2))}}),ce=oe(re);export{ce as Y};
