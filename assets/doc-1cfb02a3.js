import{r as D,dq as v,dn as S,d as _,e7 as w,eh as m,dD as P,c as Y,q as V,p as N,a as f,o as h,b as R,j as e,e as o,e4 as O,e6 as U,dZ as j,n as M,eO as z,dG as G,eH as J,dU as H,f as k,w as E,k as C,_ as K}from"./index-79e930ed.js";import{Y as F}from"./index-7dac4f4d.js";import{Y as Z}from"./index-913afc19.js";import"./use-form-item-edb160f6.js";const Q={data:{type:Array,default:()=>[]}},W={type:{type:String,default:"default"},align:{type:String,default:"left"},property:String,label:String,formatter:Function},T=Symbol("YkTable"),X=function(a=[]){const t=S(),n=D(a),l=D([]),r=D([]),c=D(!1);return{state:{data:n,columns:l,selection:r,isAllSelected:c},action:{insertColumn(s,i){const d=v(s.columns);d.push(i),q(d),s.columns.value=d},removeColumn(s,i){const d=v(s.columns),y=d.findIndex(B=>B===i);y>-1&&d.splice(y,1),q(d),s.columns.value=d},toggleRowSelection(s,i,d){const y=v(s.selection),B=y.indexOf(i),I=B!==-1;d&&!I?y.push(i):!d&&I&&y.splice(B,1),s.selection.value=y,s.data.value.length===y.length?s.isAllSelected.value=!0:s.isAllSelected.value=!1;const L=(s.selection.value||[]).slice();t.emit("select",L,i),t.emit("selection-change",L)},toggleAllSelection(s,i){s.data.value.forEach(d=>{this.toggleRowSelection(s,d,i)}),t.emit("select-all",r.value)}},dispatch:function(s,...i){const d=t.store.action;if(d[s])d[s](t.store.state,...i);else throw new Error(`Action not found: ${s}`)},isSelected:function(s){return r.value.includes(s)}}};function q(a){a.forEach(t=>{var n;t.index=(n=t.getColumnIndex)==null?void 0:n.call(t)}),a.sort((t,n)=>t.index-n.index)}const ee=_({components:{YkCheckbox:F},setup(){const a=w(T),t=a==null?void 0:a.store;return{columnList:t==null?void 0:t.state.columns,bem:a.bem}},render(){const{columnList:a,bem:t}=this;return m("thead",{class:[t("header")]},m("tr",{},a==null?void 0:a.map((n,l)=>m("th",{class:[t("cell")]},n.renderHeader({column:n,index:l})))))}}),te=_({setup(){const a=w(T),t=a.store,n=t==null?void 0:t.state.columns;return{store:t,columnList:n,bem:a.bem}},render(){const{columnList:a,store:t,bem:n}=this,l=(t==null?void 0:t.state.data.value)||[];return m("tbody",{class:[n("body")]},l.map(r=>m("tr",{class:[n("row")]},a.map((c,A)=>{const b={row:r,index:A,column:c},u=c.renderCell(b);return m("td",{class:[n("cell"),`text-${c.align}`]},[u])}))))}});let le=1;const ne=_({name:"YkTable",components:{TableHeader:ee,TableBody:te},props:Q,emits:["select","selection-change","select-all"],setup(a){const t=P("table"),n=S();n.bem=t;const l=X();l.state.data.value=a.data,n.store=l;const r=`yk-table_${le++}`;n.tableId=r;const c=Y(()=>(l.state.data.value||[]).length===0);return V(T,n),{bem:t,tableId:r,store:l,isEmpty:c}}}),ae={ref:"hiddenColumns"};function oe(a,t,n,l,r,c){const A=f("TableHeader"),b=f("TableBody");return h(),R("div",{class:M(a.bem())},[e("table",null,[o(A),o(b)]),O(e("div",ae,[j(a.$slots,"default")],512),[[U,!1]])],2)}const ce=N(ne,[["render",oe]]);let se=1;const re=_({name:"YkTableColumn",components:{YkCheckbox:F},props:W,setup(a,{slots:t}){const n=S(),l=D({}),r=`column_${se++}`,c=Y(()=>{let u=n.parent;for(;u&&!(u!=null&&u.tableId);)u=u.parent;return u}),A=c.value.store,b=({row:u,column:p,index:s})=>{var y;const i=p.property,d=i&&u[i];return p&&p.type=="checkbox"?m(F,{checked:A.isSelected(u),onChange(B){A.dispatch("toggleRowSelection",u,B)}}):p&&p.formatter?p.formatter(u,p,d,s):((y=d==null?void 0:d.toString)==null?void 0:y.call(d))||""};return z(()=>{l.value={id:r,type:a.type,align:a.align,property:a.property,label:a.label,formatter:a.formatter,renderCell:u=>{let p=null;if(t.default){const s=t.default(u);p=s.some(i=>i.type!==Comment)?s:b(u)}else p=b(u);return m("div",{class:["cell"]},[p])},renderHeader:({column:u,index:p})=>{const s=t.header;let i=null;return u.type==="checkbox"?i=m(F,{checked:A.state.isAllSelected.value,indeterminate:A.state.selection.value.length>0&&!A.state.isAllSelected.value,onChange:d=>{A.dispatch("toggleAllSelection",d)}}):i=u.label,m("div",{class:"cell"},[s?s({column:u,index:p}):i])}}}),G(()=>{var i;const u=(i=c.value.refs.hiddenColumns)==null?void 0:i.children,p=()=>Array.from(u).findIndex(d=>d==n.vnode.el);l.value.getColumnIndex=p,p()>-1&&c.value.store.dispatch("insertColumn",l.value)}),J(()=>{c.value.store.dispatch("removeColumn",l.value)}),{columnId:r,columnConfig:l}},render(){var t,n;const a=(n=(t=this.$slots).default)==null?void 0:n.call(t,{row:{},column:{},$index:-1});return a?m("div",a):m("div",[])}}),g=H(ce),x=H(re);const ue=_({__name:"table-primary",setup(a){const t=[];for(let n=0;n<5;n++)t.push({name:"浩哥看沟通",email:"xigeotmete@qq.com",bir:"1994.03.12",desc:"这句话不知道 当讲不当讲，反正就是想讲一讲的"});return(n,l)=>{const r=x,c=g;return h(),k(c,{data:t},{default:E(()=>[o(r,{property:"name",label:"用户名"}),o(r,{property:"email",label:"邮箱"}),o(r,{property:"bir",label:"生日"}),o(r,{property:"desc",label:"简介"})]),_:1})}}}),de=_({__name:"table-checkbox",setup(a){const t=[];for(let l=0;l<5;l++)t.push({name:"浩哥看沟通",email:"xigeotmete@qq.com",bir:"1994.03.12",desc:"这句话不知道 当讲不当讲，反正就是想讲一讲的"});const n=l=>{console.log(l)};return(l,r)=>{const c=x,A=g;return h(),k(A,{data:t,onSelectionChange:n},{default:E(()=>[o(c,{type:"checkbox"}),o(c,{property:"name",label:"用户名"}),o(c,{property:"email",label:"邮箱"}),o(c,{property:"bir",label:"生日"}),o(c,{property:"desc",label:"简介"})]),_:1})}}}),ie=_({__name:"table-custom",setup(a){const t=[];for(let l=0;l<5;l++)t.push({name:"浩哥看沟通",email:"xigeotmete@qq.com",bir:"1994.03.12"});const n=l=>{console.log(l)};return(l,r)=>{const c=x,A=K,b=g;return h(),k(b,{data:t,onSelectionChange:n},{default:E(()=>[o(c,{property:"name",label:"用户名"}),o(c,{property:"email",label:"邮箱"}),o(c,{property:"bir",label:"生日"}),o(c,{property:"desc",label:"操作"},{default:E(()=>[o(A,{type:"secondary",status:"primary"},{default:E(()=>[C("添加")]),_:1}),o(A,{type:"outline",status:"primary",style:{"margin-left":"8px"}},{default:E(()=>[C(" 删除 ")]),_:1})]),_:1})]),_:1})}}}),$="",Ee=_({__name:"table-custom-header",setup(a){const t=D([]);for(let l=0;l<5;l++)t.value.push({name:"浩哥看沟通",email:"xigeotmete@qq.com",bir:"1994.03.12",desc:"这句话不知道 当讲不当讲，反正就是想讲一讲的"});const n=({column:l,index:r})=>{console.log(l)};return(l,r)=>{const c=x,A=Z,b=g;return h(),k(b,{data:t.value},{default:E(()=>[o(c,{property:"name",label:"用户名"}),o(c,{property:"email",label:"邮箱"}),o(c,{property:"bir",label:"生日"}),o(c,{property:"desc",label:"操作"},{header:E(u=>[o(A,{modelValue:$,"onUpdate:modelValue":r[0]||(r[0]=p=>$=p),placeholder:"Type to search",onInput:p=>n(u)},null,8,["onInput"])]),_:1})]),_:1},8,["data"])}}}),pe=e("p",null,"这里展示基本用法",-1),Ae=e("p",null,"可以选择多行数据",-1),me=e("p",null,"自定义列的显示内容，可组合其他组件使用",-1),be=e("p",null,"通过设置 slot 来自定义表头。",-1),ye=e("div",{class:"table-container"},[e("table",null,[e("thead",null,[e("tr",null,[e("th",null,"参数"),e("th",null,"描述"),e("th",null,"类型"),e("th",null,"默认值")])]),e("tbody",null,[e("tr",null,[e("td",null,"data"),e("td",null,"显示的数据"),e("td",null,"array"),e("td",null,"—")])])])],-1),Ce=e("div",{class:"table-container"},[e("table",null,[e("thead",null,[e("tr",null,[e("th",null,"参数"),e("th",null,"描述"),e("th",null,"回调参数")])]),e("tbody",null,[e("tr",null,[e("td",null,"select"),e("td",null,"当用户手动勾选数据行的 Checkbox 时触发的事件"),e("td",null,"selection, row")]),e("tr",null,[e("td",null,"select-all"),e("td",null,"当用户手动勾选全选 Checkbox 时触发的事件"),e("td",null,"selection")]),e("tr",null,[e("td",null,"selection-change"),e("td",null,"当选择项发生变化时会触发该事件"),e("td",null,"selection")])])])],-1),_e=e("div",{class:"table-container"},[e("table",null,[e("thead",null,[e("tr",null,[e("th",null,"参数"),e("th",null,"描述"),e("th",null,"类型"),e("th",null,"默认值")])]),e("tbody",null,[e("tr",null,[e("td",null,"type"),e("td",null,"type"),e("td",null,"selection /default"),e("td",null,"default")]),e("tr",null,[e("td",null,"label"),e("td",null,"显示的标题"),e("td",null,[e("code",null,"string ")]),e("td",null,"—")]),e("tr",null,[e("td",null,"property"),e("td",null,"对应列内容的字段名"),e("td",null,[e("code",null,"string")]),e("td",null,"—")]),e("tr",null,[e("td",null,"formatter"),e("td",null,"用来格式化内容"),e("td",null,"function(row, column, cellValue, index)"),e("td",null,"—")]),e("tr",null,[e("td",null,"align"),e("td",null,"对齐方式"),e("td",null,"left / center / right"),e("td",null,"left")])])])],-1),Be=e("div",{class:"table-container"},[e("table",null,[e("thead",null,[e("tr",null,[e("th",null,"参数"),e("th",null,"描述")])]),e("tbody",null,[e("tr",null,[e("td",null,"default"),e("td",null,"自定义列的内容 作用域参数为 { row, column, index }")]),e("tr",null,[e("td",null,"header"),e("td",null,"自定义表头的内容， 作用域参数为 { column, index }")])])])],-1),Fe={__name:"doc",setup(a){return(t,n)=>{const l=f("yk-title"),r=f("yk-snippet"),c=f("DocPage");return h(),k(c,null,{default:E(()=>[o(l,{level:2,id:"YkTable表格"},{default:E(()=>[C("YkTable 表格")]),_:1}),o(r,{title:"基本用法",code:"%3Ctemplate%3E%0A%20%20%3Cyk-table%20%3Adata%3D%22dataList%22%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22name%22%20label%3D%22%E7%94%A8%E6%88%B7%E5%90%8D%22%3E%3C%2Fyk-table-column%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22email%22%20label%3D%22%E9%82%AE%E7%AE%B1%22%3E%3C%2Fyk-table-column%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22bir%22%20label%3D%22%E7%94%9F%E6%97%A5%22%3E%3C%2Fyk-table-column%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22desc%22%20label%3D%22%E7%AE%80%E4%BB%8B%22%3E%3C%2Fyk-table-column%3E%0A%20%20%3C%2Fyk-table%3E%0A%3C%2Ftemplate%3E%0A%3Cscript%20setup%20lang%3D%22ts%22%3E%0Aconst%20dataList%20%3D%20%5B%5D%0Afor%20(let%20index%20%3D%200%3B%20index%20%3C%205%3B%20index%2B%2B)%20%7B%0A%20%20dataList.push(%7B%0A%20%20%20%20name%3A%20'%E6%B5%A9%E5%93%A5%E7%9C%8B%E6%B2%9F%E9%80%9A'%2C%0A%20%20%20%20email%3A%20'xigeotmete%40qq.com'%2C%0A%20%20%20%20bir%3A%20'1994.03.12'%2C%0A%20%20%20%20desc%3A%20'%E8%BF%99%E5%8F%A5%E8%AF%9D%E4%B8%8D%E7%9F%A5%E9%81%93%20%E5%BD%93%E8%AE%B2%E4%B8%8D%E5%BD%93%E8%AE%B2%EF%BC%8C%E5%8F%8D%E6%AD%A3%E5%B0%B1%E6%98%AF%E6%83%B3%E8%AE%B2%E4%B8%80%E8%AE%B2%E7%9A%84'%2C%0A%20%20%7D)%0A%7D%0A%3C%2Fscript%3E%0A"},{demo:E(()=>[o(ue)]),desc:E(()=>[pe]),_:1}),o(r,{title:"多选",code:"%3Ctemplate%3E%0A%20%20%3Cyk-table%20%3Adata%3D%22dataList%22%20%40selection-change%3D%22handleSelectionChange%22%3E%0A%20%20%20%20%3Cyk-table-column%20type%3D%22checkbox%22%3E%3C%2Fyk-table-column%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22name%22%20label%3D%22%E7%94%A8%E6%88%B7%E5%90%8D%22%3E%3C%2Fyk-table-column%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22email%22%20label%3D%22%E9%82%AE%E7%AE%B1%22%3E%3C%2Fyk-table-column%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22bir%22%20label%3D%22%E7%94%9F%E6%97%A5%22%3E%3C%2Fyk-table-column%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22desc%22%20label%3D%22%E7%AE%80%E4%BB%8B%22%3E%3C%2Fyk-table-column%3E%0A%20%20%3C%2Fyk-table%3E%0A%3C%2Ftemplate%3E%0A%3Cscript%20setup%20lang%3D%22ts%22%3E%0Aconst%20dataList%20%3D%20%5B%5D%0Afor%20(let%20index%20%3D%200%3B%20index%20%3C%205%3B%20index%2B%2B)%20%7B%0A%20%20dataList.push(%7B%0A%20%20%20%20name%3A%20'%E6%B5%A9%E5%93%A5%E7%9C%8B%E6%B2%9F%E9%80%9A'%2C%0A%20%20%20%20email%3A%20'xigeotmete%40qq.com'%2C%0A%20%20%20%20bir%3A%20'1994.03.12'%2C%0A%20%20%20%20desc%3A%20'%E8%BF%99%E5%8F%A5%E8%AF%9D%E4%B8%8D%E7%9F%A5%E9%81%93%20%E5%BD%93%E8%AE%B2%E4%B8%8D%E5%BD%93%E8%AE%B2%EF%BC%8C%E5%8F%8D%E6%AD%A3%E5%B0%B1%E6%98%AF%E6%83%B3%E8%AE%B2%E4%B8%80%E8%AE%B2%E7%9A%84'%2C%0A%20%20%7D)%0A%7D%0Aconst%20handleSelectionChange%20%3D%20(val)%20%3D%3E%20%7B%0A%20%20console.log(val)%0A%7D%0A%3C%2Fscript%3E%0A"},{demo:E(()=>[o(de)]),desc:E(()=>[Ae]),_:1}),o(r,{title:"自定义列",code:"%3Ctemplate%3E%0A%20%20%3Cyk-table%20%3Adata%3D%22dataList%22%20%40selection-change%3D%22handleSelectionChange%22%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22name%22%20label%3D%22%E7%94%A8%E6%88%B7%E5%90%8D%22%3E%3C%2Fyk-table-column%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22email%22%20label%3D%22%E9%82%AE%E7%AE%B1%22%3E%3C%2Fyk-table-column%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22bir%22%20label%3D%22%E7%94%9F%E6%97%A5%22%3E%3C%2Fyk-table-column%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22desc%22%20label%3D%22%E6%93%8D%E4%BD%9C%22%3E%0A%20%20%20%20%20%20%3Cyk-button%20type%3D%22secondary%22%20status%3D%22primary%22%3E%E6%B7%BB%E5%8A%A0%3C%2Fyk-button%3E%0A%20%20%20%20%20%20%3Cyk-button%20type%3D%22outline%22%20status%3D%22primary%22%20style%3D%22margin-left%3A%208px%22%3E%0A%20%20%20%20%20%20%20%20%E5%88%A0%E9%99%A4%0A%20%20%20%20%20%20%3C%2Fyk-button%3E%0A%20%20%20%20%3C%2Fyk-table-column%3E%0A%20%20%3C%2Fyk-table%3E%0A%3C%2Ftemplate%3E%0A%3Cscript%20setup%20lang%3D%22ts%22%3E%0Aconst%20dataList%20%3D%20%5B%5D%0Afor%20(let%20index%20%3D%200%3B%20index%20%3C%205%3B%20index%2B%2B)%20%7B%0A%20%20dataList.push(%7B%0A%20%20%20%20name%3A%20'%E6%B5%A9%E5%93%A5%E7%9C%8B%E6%B2%9F%E9%80%9A'%2C%0A%20%20%20%20email%3A%20'xigeotmete%40qq.com'%2C%0A%20%20%20%20bir%3A%20'1994.03.12'%2C%0A%20%20%20%20%2F%2F%20desc%3A%20'%E8%BF%99%E5%8F%A5%E8%AF%9D%E4%B8%8D%E7%9F%A5%E9%81%93%20%E5%BD%93%E8%AE%B2%E4%B8%8D%E5%BD%93%E8%AE%B2%EF%BC%8C%E5%8F%8D%E6%AD%A3%E5%B0%B1%E6%98%AF%E6%83%B3%E8%AE%B2%E4%B8%80%E8%AE%B2%E7%9A%84'%2C%0A%20%20%7D)%0A%7D%0Aconst%20handleSelectionChange%20%3D%20(val)%20%3D%3E%20%7B%0A%20%20console.log(val)%0A%7D%0A%3C%2Fscript%3E%0A"},{demo:E(()=>[o(ie)]),desc:E(()=>[me]),_:1}),o(r,{title:"自定义表头",code:"%3Ctemplate%3E%0A%20%20%3Cyk-table%20%3Adata%3D%22dataList%22%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22name%22%20label%3D%22%E7%94%A8%E6%88%B7%E5%90%8D%22%3E%3C%2Fyk-table-column%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22email%22%20label%3D%22%E9%82%AE%E7%AE%B1%22%3E%3C%2Fyk-table-column%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22bir%22%20label%3D%22%E7%94%9F%E6%97%A5%22%3E%3C%2Fyk-table-column%3E%0A%20%20%20%20%3Cyk-table-column%20property%3D%22desc%22%20label%3D%22%E6%93%8D%E4%BD%9C%22%3E%0A%20%20%20%20%20%20%3Ctemplate%20%23header%3D%22scope%22%3E%0A%20%20%20%20%20%20%20%20%3Cyk-input%0A%20%20%20%20%20%20%20%20%20%20v-model%3D%22search%22%0A%20%20%20%20%20%20%20%20%20%20placeholder%3D%22Type%20to%20search%22%0A%20%20%20%20%20%20%20%20%20%20%40input%3D%22handleInput(scope)%22%0A%20%20%20%20%20%20%20%20%2F%3E%0A%20%20%20%20%20%20%3C%2Ftemplate%3E%0A%20%20%20%20%3C%2Fyk-table-column%3E%0A%20%20%3C%2Fyk-table%3E%0A%3C%2Ftemplate%3E%0A%3Cscript%20setup%20lang%3D%22ts%22%3E%0Aimport%20%7B%20ref%20%7D%20from%20'vue'%0Aconst%20search%20%3D%20''%0Aconst%20dataList%20%3D%20ref(%5B%5D)%0Afor%20(let%20index%20%3D%200%3B%20index%20%3C%205%3B%20index%2B%2B)%20%7B%0A%20%20dataList.value.push(%7B%0A%20%20%20%20name%3A%20'%E6%B5%A9%E5%93%A5%E7%9C%8B%E6%B2%9F%E9%80%9A'%2C%0A%20%20%20%20email%3A%20'xigeotmete%40qq.com'%2C%0A%20%20%20%20bir%3A%20'1994.03.12'%2C%0A%20%20%20%20desc%3A%20'%E8%BF%99%E5%8F%A5%E8%AF%9D%E4%B8%8D%E7%9F%A5%E9%81%93%20%E5%BD%93%E8%AE%B2%E4%B8%8D%E5%BD%93%E8%AE%B2%EF%BC%8C%E5%8F%8D%E6%AD%A3%E5%B0%B1%E6%98%AF%E6%83%B3%E8%AE%B2%E4%B8%80%E8%AE%B2%E7%9A%84'%2C%0A%20%20%7D)%0A%7D%0Aconst%20handleInput%20%3D%20(%7B%20column%2C%20index%20%7D)%20%3D%3E%20%7B%0A%20%20console.log(column)%0A%7D%0A%3C%2Fscript%3E%0A"},{demo:E(()=>[o(Ee)]),desc:E(()=>[be]),_:1}),o(l,{level:3,id:"API"},{default:E(()=>[C("API")]),_:1}),o(l,{level:4,id:"Table属性"},{default:E(()=>[C("Table 属性")]),_:1}),ye,o(l,{level:4,id:"Table事件"},{default:E(()=>[C("Table 事件")]),_:1}),Ce,o(l,{level:4,id:"Table-column属性"},{default:E(()=>[C("Table-column 属性")]),_:1}),_e,o(l,{level:4,id:"Table-column插槽"},{default:E(()=>[C("Table-column 插槽")]),_:1}),Be]),_:1})}}};export{Fe as default};
