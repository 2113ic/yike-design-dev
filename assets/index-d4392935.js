import{d as W,a2 as Z,c as _,i as A,o as C,b as N,F as J,h as K,n as g,Z as a,y as P,e as L,f as j,P as Q,r as R,U as ee,at as d,a3 as te,T as ne,al as ae,a4 as U,w as $,g as le,au as oe,z as se}from"./index-d235c6f2.js";import{_ as F}from"./index-bdccf0db.js";const re=["onClick"],ue=["onClick"],ie=W({inheritAttrs:!1,__name:"slider-marks",props:{modelValue:{default:()=>[]},percentStart:{default:0},percentEnd:{default:0},rangeMin:{default:0},rangeMax:{default:100}},emits:["position"],setup(o,{emit:B}){const e=o,i=Z("slider"),v=_(()=>{const w=e.rangeMax-e.rangeMin;return e.modelValue.map(M=>{const l=M.key-e.rangeMin,c=Math.round(l/w*100)||0,r=c/100;return{...M,percent:c,isOver:r===e.percentStart||r===e.percentEnd,isOvered:r>e.percentStart&&r<e.percentEnd,markInfo:M.labelNode||A("span",{style:M.style},M.label)}})});return(w,M)=>(C(),N("div",{class:g(a(i)("marks"))},[(C(!0),N(J,null,K(v.value,l=>(C(),N("div",{key:l.key,class:g(a(i)("mark-item",{over:l.isOver,overed:l.isOvered})),style:P({left:l.percent+"%"})},[L("div",{class:g(a(i)("mark-item-pointer")),onClick:c=>B("position",l.percent)},null,10,re),L("div",{class:g(a(i)("mark-item-box")),onClick:c=>B("position",l.percent)},[(C(),j(Q(l.markInfo)))],10,ue)],6))),128))],2))}}),H=o=>o<=0?0:o>=100?100:o,ce=(o,B,e,i,v,w,M)=>{let l=0,c=null,r=0;const k=R(!0),u=R(!1),S=s=>{ee(()=>{let n=Math.round(i.value/e.value*100),t=Math.round(v.value/e.value*100);n=H(n),t=H(t);const f=o.max-o.min,Y=f*n/100+o.min,I=f*t/100+o.min,O=w.value?[Y,I]:I;M(s,O)})},m=s=>{let n=i.value,t=v.value;if(w.value){if(k.value?(t=s>=l?l:s,t=t<=0?0:t):(n=s>=l?l:s,n=n<=0?0:n),n>=t){const f=n;n=t,t=f,k.value=!k.value}}else t=s>=l?l:s,t=t<=0?0:t;i.value=n,v.value=t,S("update:modelValue")},y=s=>{const n=c;if(o.direction===d[1])if(s.clientX>=n.left&&s.clientX<=n.right){const t=s.clientX-n.left,f=Math.round(t/r)*r;m(f)}else{const t=s.clientX<n.left?-9999:9999;m(t)}else if(o.direction===d[0])if(s.clientY>=n.top&&s.clientY<=n.bottom){const t=n.bottom-s.clientY,f=Math.round(t/r)*r;m(f)}else{const t=s.clientY<n.top?9999:-9999;m(t)}},V=()=>{u.value=!0,l=e.value,window.addEventListener("mousemove",y),window.addEventListener("mouseup",T),c=B.value.getBoundingClientRect(),(o.direction===d[1]||o.direction===d[0])&&(r=l*o.step/100)},x=()=>{o.disabled||(V(),k.value=!1)},z=()=>{o.disabled||(V(),k.value=!0)},T=()=>{u.value=!1,window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",T),S("change")};return{isEndBtn:k,moving:u,handleStartMouseDown:x,handleEndMouseDown:z,emitValue:S}},de=W({name:"YkSlider",__name:"slider",props:{modelValue:{default:0},disabled:{type:Boolean,default:!1},min:{default:0},max:{default:100},direction:{default:d[1]},step:{default:1},marks:{default:()=>[]},height:{default:200},showInput:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(o,{emit:B}){const e=o,i=Z("slider"),{modelValue:v,marks:w,min:M,max:l}=te(e),c=R(),r=_(()=>Array.isArray(v.value)),k=_(()=>e.max-e.min),u=R(0),S=()=>{e.direction===d[1]?u.value=c.value?c.value.offsetWidth:0:e.direction===d[0]&&(u.value=c.value?c.value.offsetHeight:0)};ne(()=>{S(),window.addEventListener("resize",S)}),ae(()=>{window.removeEventListener("resize",S)});const m=R(0),y=R(0),V=_(()=>{if(r.value){const h=(v.value[0]||0)-e.min;return Math.round(h/k.value*100)/100}else return 0}),x=_(()=>{if(r.value){const h=(v.value[1]||0)-e.min;return Math.round(h/k.value*100)/100}else{const p=v.value;return Math.round(p/k.value*100)/100}}),z=_(()=>r.value?(v.value[0]||0).toString():"0"),T=_(()=>r.value?(v.value[1]||0).toString():v.value.toString()),s=_(()=>e.direction===d[1]?"top":"right"),n=_(()=>e.direction===d[1]?{height:"2px"}:e.direction===d[0]?{height:e.height+"px",width:"2px"}:{}),t=_(()=>e.direction===d[1]?{top:0,height:"2px",left:m.value+"px",width:y.value-m.value+"px"}:e.direction===d[0]?{left:0,width:"2px",bottom:m.value+"px",height:y.value-m.value+"px"}:{}),{moving:f,isEndBtn:Y,handleStartMouseDown:I,handleEndMouseDown:O,emitValue:q}=ce(e,c,u,m,y,r,B);U(V,()=>{f.value||(m.value=V.value*u.value)},{immediate:!0}),U(x,()=>{f.value||(y.value=x.value*u.value)},{immediate:!0}),U(u,()=>{m.value=V.value*u.value,y.value=x.value*u.value},{immediate:!0});const X=p=>{if(e.disabled)return;let h=p/100;if(r.value){const E=Math.abs(V.value-h),D=Math.abs(x.value-h);E>=D?y.value=h*u.value:m.value=h*u.value}else y.value=h*u.value;q("update:modelValue")},G=p=>{if(e.disabled)return;const E=c.value.getBoundingClientRect();if(e.direction===d[1]){const D=p.clientX-E.left;let b=Math.round(D/u.value*100);b=Math.round(b/e.step)*e.step,X(b)}else if(e.direction===d[0]){const D=u.value-(p.clientY-E.top);let b=Math.round(D/u.value*100);b=Math.round(b/e.step)*e.step,X(b)}};return(p,h)=>(C(),N("div",{class:g(a(i)({withMarks:!!a(w).length,disabled:p.disabled},[p.direction]))},[L("div",{ref_key:"runwayRef",ref:c,class:g(a(i)("runway")),style:P(n.value),onClick:G},[L("div",{class:g(a(i)("bar")),style:P(t.value)},[r.value?(C(),j(a(F),{key:0,class:g(a(i)("button",{start:!0})),placement:s.value,open:a(f)&&!a(Y),trigger:"hover",title:z.value,onMousedown:a(I)},{default:$(()=>[L("div",{class:g(a(i)("tooltipSpan"))},null,2)]),_:1},8,["class","placement","open","title","onMousedown"])):le("",!0),A(a(F),{class:g(a(i)("button",{end:!0})),placement:s.value,open:a(f)&&a(Y),trigger:"hover",title:T.value,onMousedown:a(O)},{default:$(()=>[L("div",{class:g(a(i)("tooltipSpan"))},null,2)]),_:1},8,["class","placement","open","title","onMousedown"])],6)],6),A(ie,{modelValue:a(w),"onUpdate:modelValue":h[0]||(h[0]=E=>oe(w)?w.value=E:null),"range-min":a(M),"range-max":a(l),"percent-start":V.value,"percent-end":x.value,onPosition:X},null,8,["modelValue","range-min","range-max","percent-start","percent-end"])],2))}}),ve=se(de),pe=ve;export{ve as Y,pe as _};
