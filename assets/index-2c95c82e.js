import{d as A,dJ as F,r as k,dZ as H,dK as U,c as D,dM as E,dL as K,o as O,f as j,w as z,ea as J,j as P,n as Z,dw as s,e as b,_ as h,eU as q,eT as G,ec as Q,ey as W,d_ as X}from"./index-5311f08a.js";import{Y as ee}from"./index-8650c217.js";import{u as te}from"./use-form-item-e0c7d766.js";const B=(u,o,i)=>{if(Number.isInteger(u)&&Number.isInteger(o)){const m=u+o;if(i===0)return m}const d=u.toString().split(".")[1]??"",l=o.toString().split(".")[1]??"",n=10**Math.max(d.length??0,l.length??0);return(u*n+o*n)/n},se=(u,o)=>{const i=u.toString().split("."),d=i[0];let l=i[1]??"";return l.length>o?(l=l.slice(0,o),+`${d}.${l}`):u},ne=/[-]?(\d*\.\d+|\d+\.\d|\d+)/,ae=250,oe=60,ie=A({name:"YkInputNumber",__name:"input-number",props:{modelValue:{},max:{default:1/0},min:{default:-1/0},step:{default:1},precision:{default:0},size:{default:"l"},disabled:{type:Boolean,default:!1},message:{},controls:{type:Boolean,default:!0},formatter:{}},emits:["update:modelValue","increase","decrease"],setup(u,{emit:o}){const i=u,d=F("input-number"),l=k(!1),r=H({isMax:!1,isMin:!1}),n=U(i),t=k(0),m=k(),{disabled:S,size:$}=n,{mergedSize:f,mergedDisabled:C}=te({disabled:S,size:$}),c=D(()=>{let e=n.precision.value;return(!Number.isInteger(e)||e>20)&&(e=0),e}),V=()=>i.max===1/0&&i.min===-1/0?0:i.min;let g,w;const _=e=>{if(i.disabled)return;const a=e===1?y:M;window.addEventListener("mouseup",v),g=window.setTimeout(()=>{w=window.setInterval(()=>{a()},oe)},ae)},v=()=>{g&&clearTimeout(g),w&&clearInterval(w),window.removeEventListener("mouseup",v)},I=()=>{r.isMax=t.value>=n.max.value,r.isMin=t.value<=n.min.value};E(()=>{var e;t.value=((e=n.modelValue)==null?void 0:e.value)??V(),I()});const y=()=>{if(r.isMax){v();return}t.value=B(t.value,n.step.value,c.value),p(),o("increase")},M=()=>{if(r.isMin){v();return}t.value=B(t.value,-n.step.value,c.value),p(),o("decrease")},R=e=>{e.key==="ArrowUp"&&y(),e.key==="ArrowDown"&&M()},L=()=>{p()},T=()=>{},Y=e=>{var a;t.value=e?Number((e.match(ne)??["0"])[0]):0,c.value===0?t.value=Math.trunc(t.value):t.value=se(t.value,c.value),p(),r.isMax&&(t.value=n.max.value),r.isMin&&(t.value=n.min.value),(a=m.value)==null||a.setValue(N.value)},p=()=>{I(),o("update:modelValue",t.value)},N=D(()=>t.value.toFixed(c.value));return K(()=>i.modelValue,e=>{t.value=e??V(),I()}),(e,a)=>(O(),j(s(ee),W({ref_key:"inputRef",ref:m,"model-value":N.value,disabled:s(C),size:s(f),class:s(d)()},e.$attrs,{onFocus:T,onChange:L,onBlur:Y,onHoverin:a[2]||(a[2]=x=>l.value=!0),onHoverout:a[3]||(a[3]=x=>l.value=!1),onKeydown:R}),{suffix:z(()=>[J(P("div",{class:Z([s(d)("buttons"),s(d)([s(f)])])},[b(s(h),{disabled:r.isMax,size:s(f),type:"secondary",onClick:y,onMousedown:a[0]||(a[0]=x=>_(1))},{default:z(()=>[b(s(q))]),_:1},8,["disabled","size"]),b(s(h),{disabled:r.isMin,size:s(f),type:"secondary",onClick:M,onMousedown:a[1]||(a[1]=x=>_(0))},{default:z(()=>[b(s(G))]),_:1},8,["disabled","size"])],2),[[Q,e.controls&&!s(C)&&l.value]])]),_:1},16,["model-value","disabled","size","class"]))}}),le=X(ie),ce=le;export{ce as _};
